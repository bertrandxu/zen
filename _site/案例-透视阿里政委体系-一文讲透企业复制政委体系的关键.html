<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">

  <link rel="canonical" href="http://localhost:4000/%E6%A1%88%E4%BE%8B-%E9%80%8F%E8%A7%86%E9%98%BF%E9%87%8C%E6%94%BF%E5%A7%94%E4%BD%93%E7%B3%BB-%E4%B8%80%E6%96%87%E8%AE%B2%E9%80%8F%E4%BC%81%E4%B8%9A%E5%A4%8D%E5%88%B6%E6%94%BF%E5%A7%94%E4%BD%93%E7%B3%BB%E7%9A%84%E5%85%B3%E9%94%AE" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="description" content="  本文根据华夏基石e洞察【思享会】总第174期韩峰先生主题分享整理而成">

  <meta property="og:site_name" content="BertrandDigitalGarden">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-DBYSXF7WKD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-DBYSXF7WKD');
  </script> -->
  
  <!-- 
  <script src="https://unpkg.com/@waline/client@v2/dist/waline.js"></script>
  <link
    rel="stylesheet"
    href="https://unpkg.com/@waline/client@v2/dist/waline.css"
  />  
  -->
  
  
  <!-- <script async defer data-website-id="0dc17886-9c5c-4bb7-b097-104eb7c28c72" src="https://umami-production-7220.up.railway.app/umami.js"></script> -->
  
  
  <!-- Start of Howxm client code snippet -->
  <script>
  function _howxm(){_howxmQueue.push(arguments)}
  window._howxmQueue=window._howxmQueue||[];
  _howxm('setAppID','352e66d3-cc84-42ce-ac80-a43a12abf84b');
  (function(){var scriptId='howxm_script';
  if(!document.getElementById(scriptId)){
  var e=document.createElement('script'),
  t=document.getElementsByTagName('script')[0];
  e.setAttribute('id',scriptId);
  e.type='text/javascript';e.async=!0;
  e.src='https://static.howxm.com/sdk.js';
  t.parentNode.insertBefore(e,t)}})();
  </script>
  <!-- End of Howxm client code snippet -->
  
  <script type="text/javascript">
      (function(c,l,a,r,i,t,y){
          c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
          t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
          y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "jurm89uqvq");
  </script>
  
  <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo=">

  <link rel="stylesheet" href="/styles.css">

  
  <meta property="og:description" content="  本文根据华夏基石e洞察【思享会】总第174期韩峰先生主题分享整理而成"/>
  

  
  <meta property="og:title" content="【案例】透视阿里政委体系，一文讲透企业复制政委体系的关键">
  <meta property="og:type" content="article">
  

  
  <meta property="article:published_time" content="2024-03-09T23:52:57+08:00">
  <meta property="article:author" content="http://localhost:4000/">
  

  <meta property="og:url" content="http://localhost:4000/%E6%A1%88%E4%BE%8B-%E9%80%8F%E8%A7%86%E9%98%BF%E9%87%8C%E6%94%BF%E5%A7%94%E4%BD%93%E7%B3%BB-%E4%B8%80%E6%96%87%E8%AE%B2%E9%80%8F%E4%BC%81%E4%B8%9A%E5%A4%8D%E5%88%B6%E6%94%BF%E5%A7%94%E4%BD%93%E7%B3%BB%E7%9A%84%E5%85%B3%E9%94%AE" />

  

  <title>
    
      【案例】透视阿里政委体系，一文讲透企业复制政委体系的关键 &mdash; BertrandDigitalGarden
    
  </title>
</head>

  <body>
    <nav><div>
    <a class="internal-link" href="/"><b>BertrandDigitalGarden</b></a>
</div></nav>
    <div class="wrapper">
      <main><article>
  <div>
    <h1>【案例】透视阿里政委体系，一文讲透企业复制政委体系的关键</h1>
    <!-- 更新时间一直都是显示为构建时间，先屏蔽 -->
    <time datetime="">
      最后更新于 
      
    </time> 
  </div>

  <div id="notes-entry-container">
    <content>
      <html><body>
<ul>
  <li>
    <p>本文根据华夏基石e洞察【思享会】总第174期韩峰先生主题分享整理而成</p>
  </li>
  <li>
    <p>分享人：韩峰，世界500强公司十五年以上管理经验，在项目交付、产品开发管理、外包合作和人力资源等方面具有丰富的实践经验</p>
  </li>
  <li>
    <p>来源：华夏基石e洞察（ID：chnstonewx）</p>
  </li>
  <li>
    <p>华夏基石e洞察原创，如需转载请通过向华夏基石e洞察公众号后台申请授权</p>
  </li>
</ul>

<p><img src="7D30D5D223444035B5D04F8FC2422940.jpeg" alt=""></p>

<p>我们先简单回顾下人力资源管理的发展情况。传统人力资源管理多数工作流程是先按职能划分团队，我们熟知的就是人力资源六大模块；随着市场竞争的加剧以及经营环境的复杂化，业务侧要求人力资源提供面向业务的完整的人力资源解决方案，因此三支柱模型应运而生，三支柱模型由Dave Ulrich于1996年提出，大约在2001到2002年左右引入中国，在国内如华为和腾讯已有着比较成功的应用案例，本文先从介绍三支柱模型在华为的应用特点讲起。</p>

<p>一、三支柱应用案例</p>

<p>华为很早便开启了三支柱模型的探索和引入，到2014年左右日趋成熟，过程中对华为的业务发展起到了关键的支撑作用。华为公司的人力资源转型过程体现了如下几点特色：</p>

<p>1.转型是在业务快速发展的背景下开展的，公司全面引入了三支柱模型。在此背景下，在策略上勇于争先，在人才选用育留方面敢于高投入，在人力资源能力建设上力争实现高价值。</p>

<p>2.工作目标上体现一点两面，即以内部客户满意度作为核心目标，致力于成为业务部门的合作伙伴，人力资源工作要能同时体现人力资本的效率效益提升和员工价值提升。</p>

<p>3.配合公司全球化业务拓展需要，人力资源在以三支柱为基础的组织设置、人员配备、IT支撑等方面也面向全球化建设。</p>

<p>4.三支柱模型有着良好的COE基础，在华为发展过程中，通过和IBM/Hay等咨询公司的合作，丰富和完善了奖金、任职、薪酬和绩效考核等COE体系，在COE能力上具备较好的基础。</p>

<p>5.在人员配置上，COE尤其是公司级别的COE配置是专家级的，配置精简化但具备丰富的理论和实践经验；在HRBP配置上，为了保证对业务的理解和良好支撑，从业务部门转了不少HR，在发展通道上实现了HR和业务部门之间的之字形发展。</p>

<ol>
  <li>HRBP在公司内扮演了战略伙伴、HR解决方案集成者、HR流程运作者、关系管理者、变革推动者和核心价值观传承驱动者等六大角色职能，为业务提供定制化服务。</li>
</ol>

<p>7.不同层级HRBP关注焦点不同，基层更关注于团队绩效、工作满意度、激励和归属等问题，而越往高层，则更多关注于组织变革和领导力等。</p>

<p>在人力资源管理方面，腾讯公司有两点明显特色：一个是将三支柱中的SSC主动升级到SDC，结合大数据分析，面向不断变化的互联网业务发展需求，整合资源、团队和能力等，提供一站式交付，提供良好的客户体验；第二点是不同于华为公司，腾讯公司很多HRBP是专业HR出身，这和不同公司的业务特点应该有一定关联。当然腾讯人力资源管理还有其他特色，限于篇幅不再赘述。</p>

<p>二、阿里政委体系的由来</p>

<p>讲完三支柱应用案例，我们回到政委体系这个命题上，首先从体系的由来谈起。</p>

<p>1.军队政委体系的发展</p>

<p>政治委员制度在国外发展是始于18世纪意大利共和国雇佣军，最初职能是作为政府全权代表监督部队，后来作为法国雅各宾派专政手段再最后由列宁引入无产阶级革命军队中。</p>

<p>在我党引入过程体现了如下特色：</p>

<p>A.结合了党在国民革命军中党代表的经验，在组织层面实现了“战争是政治的延续”，在政委的核心价值上体现了两层含义，一个是保障党对军队的领导；还有就是要发挥精神激励作用，保障战争动员的专业化和军队的稳定性。</p>

<p>B.汇报关系上，政治委员直属上级部队首长，在同级党委领导下工作。政治工作上，服从上级政治委员、政治机关；军事工作上，服从上级军事指挥员、政治委员和军事机关。</p>

<p>C.内部权力分配机制上，政委负责政治工作，军事主管负责军事，通过党委制实现集体领导，党委书记在民主机制上有最后决定权。</p>

<p>美国军队与此不同的是，虽然没有政委，但是美军有随军牧师负责军队的精神辅导，随军牧师的定位不像政委，只是军队的雇员。不过根据美军长期的经验总结看，哪个军队的牧师队伍越稳定，越持久，哪个队伍的战斗力就越强。</p>

<p>2.企业政委体系引入</p>

<p>回到企业的政委体系，应该说，企业和军队的政委体系诉求不尽相同，不过类似军队的精神建设，企业也有文化和核心价值观灯精神文化建设，在这方面是有一定共通性的。实际政委体系在华为和腾讯也有过一定的探讨或体现，华为公司早些年就政委机制已做了内部讨论，公司是希望HRBP能做成二把手的，但最终并没有从权利和责任等方面明确赋予。腾讯公司也没有明确提出政委机制，不过从一些具体事情上隐约反映出政委职能，比如干部任命时要求HRBP进行深度交流，交流的结论会对干部的任免有很大影响。</p>

<p>真正明确提出并实践政委概念的主要是阿里公司了。大家都知道阿里政委的创意来自于马云观看《历史的天空》和《亮剑》时的感悟。两部电视剧都体现了相同的几点： 1.政委是军队的灵魂，在团队凝聚力和战斗力方面要起到有力保证作用；2.政委能打枪、懂政策，也就是既懂业务又懂人力资源政策；3.政委通过自身的影响力，对军事长官的领导力建设起到了积极的作用。当然，阿里政委体系引入的业务背景则在于电商企业飞速发展带来的层出不穷的人员管理问题。</p>

<p>三、阿里政委体系的特点</p>

<p>在此我们主要介绍下阿里政委体系相对于普通HRBP的不同特点，这里面不少地方体现了明显的军队政委的特点。</p>

<p>1.职责定位：政委明确定位为“二把手”，负责在组织和人才上匹配和辅助业务主管，但对主管要发挥业务制衡、引导和改造作用。</p>

<p>2.权利责任：阿里员工价值观考核占据50%，政委在这方面发挥重要作用，政委要保障基本价值观和规章的贯彻执行，在用人和组织文化方面具有一票否决权，同时政委具有一定“特权”，比如绕开业务主管召开人员会议听取意见等。</p>

<p>3.业务理解：对业务的理解在阿里是明确提出的，而且要求以10%-30%的时间投入其中，尽可能参加一些业务例会并提出专业意见。</p>

<p>4.员工沟通：明确提出50%-60%的时间要投入员工访谈，了解员工并保障团队士气，这里需要强调下，明确这个要求是需要一定魄力的，在三支柱应用中有不少HRBP因时间问题，在员工上的沟通时间不超过10%，慢慢失去了HRBP的核心价值点。</p>

<p>5.工作模式：以业务需求为牵引的灵活的工作模式，以公司业务发展为导向而不是以指标完成为导向，如跟随业务变化灵活修正业务指标，加强业务牵引等。</p>

<p>四、阿里政委体系的价值剖析</p>

<p>说到这里，大家自然就会想到，阿里通过中西合璧，引入政委体系的意义何在？个人认为在如下方面具有其重要意义：</p>

<p>1.首先，是有利于打造一支有灵魂的队伍，文化和核心价值观的传承管理最终是为了打造一支具备灵魂的队伍。没有灵魂，大家缺乏共同的追求和目标，很容易沦落成一切围绕指标而存在的团队，团队行为也极容易受业务主管单点影响。而一支具有灵魂和核心凝聚力的队伍，必然体现如下特征：</p>

<p>A.更容易保障企业在出现危机或大变革等情况下队伍的稳定。一旦企业出现方向不清晰、业绩下滑等情况，这种灵魂的建设性作用就会凸显。</p>

<p>B.有效提升员工工作效率，有利于员工加强主动性。</p>

<p>C.大大降低团队的管理难度和复杂度，在统一价值观的牵引下，大家的目的和方向一致，具备相对更统一的行为标准，意见上更容易达成理解。</p>

<p>D.更好地实现内部协作，减少部门壁垒。一些企业之所以常常要提倡项目化运作，很大程度上就是为了减少这种“部门墙”。</p>

<p>E.最后想强调一点，如果大家在海外呆过，就能真正了解一支具备统一文化和价值观的重要性，不同的国家文化和沟通理解会给组织运作带来极大的效率浪费。</p>

<p>小米公司对人员的精挑细选，360对人性差异的感悟以及华为公司一些标杆人物的宣传，都客观反映了核心价值观和团队灵魂建设的重要性。马云曾说过阿里要做一家102年的企业，对政委权利责任的赋予，也反映了阿里打造百年老店的信心和决心，而阿里“月饼门”事件则是这一决心的最好的写照。</p>

<p>2.更有利于政委协助业务主管提升领导力，也有利于通过制衡作用避免一言堂事情发生。张京普和赵刚在协助业务主管打造领导力方面就做得很好；在避免一言堂问题上，一个明显的例子，在企业中很多经营效率问题常出在中高层，因为经过一段时间沉淀后，常常一些优缺点比较明显的人占据了企业中高层的领导地位，而他们的一些惯性思维，有时会给企业带来无可估量的额外成本，政委机制如果应用得好，能在一定程度上弥补这种管理缺陷。</p>

<p>3.更容易保障组织立足于长远目标，防止陷入KPI导向的短期目标的漩涡中，阿里明确提出政委要在这点上形成制衡作用，这点对于组织的长期发展是具备重要意义的。</p>

<p>4.更容易避免让HRBP陷入打杂的苦逼的命运，缺少明确的政委权利责任要求，加上HRBP本身业务不是直接和业务关联，在COE或SSC等体系建设不完善情况下，HRBP很容易陷入日常繁琐事务中并最终沦为业务主管的“打工仔”。</p>

<p>5.更有利于政委站在业务主管不同的角度发挥内外部影响力，从而更有利于组织和人员的长远发展。所谓不在其位，不谋其政，管理中最难管的是人，赋予了政委权利责任，更有助于在团队中管理好人这一多变因素。</p>

<p>6.最后一点，政委也是一个巨大的“司令”储备库，有了对政委业务方面的明确要求，政委可以根据需要方便地转身成为团队“一把手”，也有利于快速保障团队的“又红又专”。</p>

<p>前文从正向角度我们看到了政委体系带来的价值。但从另外一个角度审视，阿里选择政委体系在某种程度上对企业的管理和运作能力等提出了更高的挑战，因为涉及到内部权力分工协作、对大批高素质人员要求以及政委身兼多种职能要求等。可以想见这个转型过程不会一帆风顺，权力赋予了政委如何展现自身的价值，更是政委面临的极大挑战。</p>

<p>五、企业复制政委体系的关键注意点</p>

<p>现在让我们回到最根本的问题上，企业能否复制以及复制过程的关键注意事项在哪里？</p>

<p>谈及政委体系推行，必须要结合人力资源三支柱模型一起看，毕竟政委体系并没有脱离三支柱基础。这里看两个数据，第一是前期有个全球调研发现53%的公司认为BP在本公司的推行不成功，而国内的成功案例更是凤毛麟角，国内比较典型的是海尔公司回退了三支柱模型；第二个数据是GE公司的杰克韦尔奇曾说“人力资源负责人在任何企业中都应该是第二号人物”，但有人说在中国， 99%的企业都做不到，因为人力资源很难创造这么大的价值。由此看来，人力资源变革的推广是具备一定挑战性的。变革推广的条件如果简单概括，就是需要企业有充足的战略、思想、财力和人力上的准备，要具备较成熟的流程和管理成熟度。实际推广时，更应该关注如下关键注意点：</p>

<p>1.对一些基础较弱、规模偏小、业务成熟度较低的企业，切记盲目跟风，不一定非要推行，切实做好人力资源基础服务工作就好。而具有一定条件的企业在推广中也不宜操之过急，不一定需要像以上公司一样同步推行三支柱，集中优势资源解决最核心问题就好。</p>

<p>2.因为转型面临整个企业的战略转型和组织变革，一定要把这个工作上升到战略和业务层面，领导者需要提供足够的支持、富有耐心并积极配合。</p>

<p>3.三支柱内外部要定位清晰、分工明确。内部分工要在效率、质量和成本等方面寻求平衡；外部需要明确和业务部门之间的分工界面，尤其要避免使HRBP最终变成打杂的；针对政委体系，必须要明确政委相对于普通HRBP不同的权利、责任以及相关汇报关系。</p>

<p>4.人才是关键。COE须确立领域专家权威；BP要具有极强的业务敏锐度，懂得人力资源管理，还要具有很强的咨询、影响和执行力；针对政委，还有尤其强调其战略衔接、业务洞察和个人领导力等；为保障人员的发展和持续换血，需提供必要的轮岗机制。</p>

<p>5.SSC的建设要以流程和效率提升为中心，明确服务标准，实现人力资源平台的信息化、公开化、模块化和标准化，基于大数据机制提供人力资源标准化平台。</p>

<p>尤其强调如下两点：</p>

<p>1.要积极拥抱变化。昨天的成功不代表明天一定正确，企业内外部环境和业务处于不断发展变化中，人力资源服务的对象也在不断变化，包括新生代时代的价值取向以及企业海外扩展带来的跨文化管理需求等，我们一定要有充分的及时调整人力资源策略的决心和心理准备。</p>

<p>2.要积极拥抱未来。业务的发展和竞争因素等让很多企业的业务边界趋于模糊，同时未来也必然在很大程度上改变人员的工作模式，如居家办公将可能成为一种普遍的模式，这些都会给人力资源工作带来极大的挑战，当然，也更容易体现人力资源工作的价值。只要好好把握，让人力资源从简单的业务支持者成为业务伙伴，并最终成为业务的核心驱动力并不是梦想。</p>

<p>总结而言，无论阿里选择政委体系还是华为或腾讯选择在三支柱模式基础上的改造，都有基于企业文化、管理成熟度和成本等多方面的综合考虑，都有其一定的历史特殊性和使命必然性，所谓适合的，就是最好的，没必要强求。我们在了解这些企业人力资源模式的同时，更要真正去了解这些企业看待问题本质的能力以及锲而不舍找出最适合自己的解决问题的能力，这才是真正的核心所在。</p>

<p>问答环节</p>

<p>问题1：我们公司在推行政委制过程中问题很多，之前事业部总经理和副总有分工，遇事有商量，增加的政委是下面的助理或者区域经理提拔起来的，遇到与人相关的问题需要三个人都邮件确认同意才能通过，因此工作效率低。请问这该如何处理？总经理是否要习惯与下属定期沟通回顾人员情况？</p>

<p>韩峰：对于阿里来讲，政委相当于二把手。在你们公司，政委实际上并没有承担二把手的职责，这和阿里不太一样。如果你们认为工作效率比较低，我建议你们重新调整，有两种调整方式：一种可以由副总直接承担政委职责，第二种是把分工定位重新调整一下，副总不介入人力资源管理，政委来做人力资源管理就好。</p>

<p>定期跟下属沟通回顾人员情况，是总经理应担的职责。对一个管理者而言，人员管理实际上是管理的是不可或缺的重要组成部分，一般情况下从业界经验来看，这种管理的职能随着人员的级别提高，人员管理投入的时间就越长。</p>

<p>问题2：政委有哪些职责？其工作内容有哪些？有哪些评价工作效果的指标？</p>

<p>韩峰：从概念来看，政委的职责主要是人力合作伙伴、公司和员工的同心结、企业文化的代言人、帮助员工成长等等。从具体的工作内容来看，包括人力资源的解决方案、人力资源政策的执行情况、协调员工的关系、人力资源计划的制订、参与员工的领导力发展和人才发展、建立岗位职责说明书等等。</p>

<p>至于评价维度，政委作为业务部门的直接支撑者，首先要懂业务，对业务指标要负责，不能脱离业务指标；其次人力资源本身的角度，团队的人员效率、团队的稳定性等也是核心指标：三是围绕业务目标和人力资源目标开展的一些与政委相关的重点工作，比如如何保证员工能力的提升、如何保证价值观的落实等，通过重点工作以保证目标的达成。</p>

<p>问题3：人才发展如何实现上接战略规划，下接绩效管理？华为、阿里等企业有什么可借鉴的最佳实践做法？</p>

<p>韩峰：从宏观层面来看，在传统人力资源中也会出现这种上下承接不畅的问题。以华为为例，有一个大的DSTE流程，是从战略到落地的完整流程设计，包括SP（战略规划）、BP（年度经营计划）、预算分解、执行过程，到最后监控形成一个完整的环节。</p>

<p>SP实际上是做一个3到5年的业务规划和人力预算的规划，相当于做一个长期规划。BP是做一个近期规划，相当于做一个年度的规划，比如今年做什么，达到什么目标？同时要做对应的人力预算目标，结合BP工作会有战略分解，相当于战略解码，对应的会有人力资源的计划规划，以此支撑业务行为。这是通过战略解码和人力预算过程来支撑整个战略规划。从战略解码分解出来的组织人员的动作，包括业务目标、人力预算、人力资源规划在短期内要做的任务以及组织人员方面的工作就很明确了。把这些归入到绩效管理PBC，然后通过KPI和PBC的方式来进行引导。这是可以借鉴的一种方式。</p>

<p>问题4：政委体系对政委的素质要求很高，尤其是对业务的洞察力。空降型政委如何在空降的100天活下来？</p>

<p>韩峰：一般情况下，公司对空降型政委会有一个考察期，考察政委应该怎么开展工作，应该把握哪些核心要素？除获得公司支持外，空降政委需要做好以下三点：一是政委必须要证明自己的专业能力，让对应的业务主管认可你；二是跟业务主管、公司相关主管和员工建立良好的工作合作关系，建立一定的规则；三是必须要结合自身的特点和业务的痛点，尽快找出来问题并给出解决措施，实现quick win，在短时间内达成一定目标，让业务主管认可空降型政委的能力。有可能这种措施，跟HR专业不是完全相关，但要只要HR发现问题并能提出解决方案，在过程中展现出你的专业能力，从而让业务主管认可你发挥的作用。能力是人的发展基础，政委展现出专业能力，很大程度上就能存活下来。</p>

<p>问题5：如何避免政委被认为是上级派来的监督者而造成大家的防范心态，公司负责人与政委意见相左时应该如何处理?</p>

<p>韩峰：前面已经提及这个问题的相关信息，我们再分层次讲一下。首先，明确政委在企业的定位。从组织上让大家理解政委的工作目标，有什么权利和职责，各个业务部门了解后，政委的定位就明确了。</p>

<p>其次，要从自身考虑。一是要具备人力资源的专业能力，在关键场合能够提出专业的意见，让员工和主管信任。但这个信任不同于一般意义的信任，是指从专业角度认为政委是有能力的，是对政委本身的要求。</p>

<p>第三，政委和业务主管之间要建立信任。信任建立在帮助业务主管解决实际问题的基础之上，让业务主管感觉到你是真心实意与他协作。这个过程中，政委可能会发现一些问题，这就要把握好两点：一是反馈问题的分寸；二是反馈问题的时机。当然，针对严重的问题，坚决不能“盖帽子”。尤其是建立信任初期的时候，政委要真正设身处地帮主管发现问题、解决问题，从而建立一种信任感。</p>

<p>第四，建立一个协同的规则。当政委和业务主管的合作关系逐渐成熟，一定要形成一种明确的协同规则，并在随后的工作中按照这个规则来执行。（文字整理/编辑 张晓倩）</p>

<p>注：【思享会】总第174期《透视阿里政委体系》课程音频已上线，公众号后台回复“思享会”可线上订阅全年50期“思享会”分享音频返回搜狐，查看更多</p>
</body></html>
    </content>

    <side style="font-size: 0.9em">
      <h3 style="margin-bottom: 1em">反向链接：</h3>
      

      <div style="font-size: 0.9em">
        <p>
          There are no notes linking to this note.
        </p>
      </div>
      
    </side>
  </div>
</article>

<!-- <hr> -->

<!-- 图谱的性能太差，先屏蔽了 --></main>
      <footer><!-- <script src="https://giscus.app/client.js"
        data-repo="oldwinter/knowledge-garden"
        data-repo-id="R_kgDOHT-NGQ"
        data-category="备发布站的评论系统"
        data-category-id="DIC_kwDOHT-NGc4CQ3PF"
        data-mapping="og:title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="light"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script> -->
</footer>
    </div>
    <!-- That file is not particularly elegant. This will need a refactor at some point. -->
<style>
  content a.internal-link {
    border-color: #8b88e6;
    background-color: #efefff;
  }

  #tooltip-wrapper {
    background: white;
    padding: 1em;
    border: 1px solid #ddd;
    border-radius: 4px;
    overflow: hidden;
    position: absolute;
    width: 400px;
    height: 400px; /* 悬浮卡片改高一点 */
    font-size: 0.8em;
    box-shadow: 0 5px 10px rgba(0,0,0,0.1);
    opacity: 0;
    transition: opacity 100ms;
  }

  /* #tooltip-wrapper:after {
		content: "";
		position: absolute;
		z-index: 1;
		bottom: 0;
		left: 0;
		pointer-events: none;
		background-image: linear-gradient(to bottom, rgba(255,255,255, 0), rgba(255,255,255, 1) 90%);
		width: 100%;
		height: 75px;
  } */
</style>
<!-- 给悬浮预览卡片加滚动条。 -->
<div style="opacity: 0; display: none; overflow-y: scroll;" id='tooltip-wrapper'>
  <div id='tooltip-content'>
  </div>
</div>

<iframe style="display: none; height: 0; width: 0;" id='link-preview-iframe' src="">
</iframe>

<script>
  var opacityTimeout;
  var contentTimeout;
  var transitionDurationMs = 100;

  var iframe = document.getElementById('link-preview-iframe')
  var tooltipWrapper = document.getElementById('tooltip-wrapper')
  var tooltipContent = document.getElementById('tooltip-content')

  function hideTooltip() {
    opacityTimeout = setTimeout(function() {
      tooltipWrapper.style.opacity = 0;
      contentTimeout = setTimeout(function() {
        tooltipContent.innerHTML = '';
        tooltipWrapper.style.display = 'none';
      }, transitionDurationMs + 1);
    }, transitionDurationMs)
  }

  function showTooltip(event) {
    var elem = event.target;
    var elem_props = elem.getClientRects()[elem.getClientRects().length - 1];
    var top = window.pageYOffset || document.documentElement.scrollTop

    if (event.target.host === window.location.host) {
      iframe.src = event.target.href
      iframe.onload = function() {
        tooltipContentHtml = ''
        tooltipContentHtml += '<div style="font-weight: bold;">' + iframe.contentWindow.document.querySelector('h1').innerHTML + '</div>'
        tooltipContentHtml += iframe.contentWindow.document.querySelector('content').innerHTML

        tooltipContent.innerHTML = tooltipContentHtml

        tooltipWrapper.style.display = 'block';
        setTimeout(function() {
          tooltipWrapper.style.opacity = 1;
        }, 1)
      }

      tooltipWrapper.style.left = elem_props.left - (tooltipWrapper.offsetWidth / 2) + (elem_props.width / 2) + "px";
      if ((window.innerHeight - elem_props.top) < (tooltipWrapper.offsetHeight)) {
          tooltipWrapper.style.top = elem_props.top + top - tooltipWrapper.offsetHeight - 10 + "px";
      } else if ((window.innerHeight - elem_props.top) > (tooltipWrapper.offsetHeight)) {
          tooltipWrapper.style.top = elem_props.top + top + 35 + "px";
      }

      if ((elem_props.left + (elem_props.width / 2)) < (tooltipWrapper.offsetWidth / 2)) {
          tooltipWrapper.style.left = "10px";
      } else if ((document.body.clientWidth - elem_props.left - (elem_props.width / 2)) < (tooltipWrapper.offsetWidth / 2)) {
          tooltipWrapper.style.left = document.body.clientWidth - tooltipWrapper.offsetWidth - 20 + "px";
      }
    }
  }

  function setupListeners(linkElement) {
    linkElement.addEventListener('mouseleave', function(_event) {
      hideTooltip();
    });

    tooltipWrapper.addEventListener('mouseleave', function(_event) {
      hideTooltip();
    });

    linkElement.addEventListener('touchend', function(_event) {
      hideTooltip();
    });

    tooltipWrapper.addEventListener('touchend', function(_event) {
      hideTooltip();
    });

    linkElement.addEventListener('mouseenter', function(event) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
      showTooltip(event);
    });

    tooltipWrapper.addEventListener('mouseenter', function(event) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
    });
  }

  document.querySelectorAll('content a').forEach(setupListeners);
</script>

  </body>
</html>
