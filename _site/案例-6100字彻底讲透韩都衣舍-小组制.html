<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">

  <link rel="canonical" href="http://localhost:4000/%E6%A1%88%E4%BE%8B-6100%E5%AD%97%E5%BD%BB%E5%BA%95%E8%AE%B2%E9%80%8F%E9%9F%A9%E9%83%BD%E8%A1%A3%E8%88%8D-%E5%B0%8F%E7%BB%84%E5%88%B6" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="description" content="2016-10-31正和岛">

  <meta property="og:site_name" content="BertrandDigitalGarden">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-DBYSXF7WKD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-DBYSXF7WKD');
  </script> -->
  
  <!-- 
  <script src="https://unpkg.com/@waline/client@v2/dist/waline.js"></script>
  <link
    rel="stylesheet"
    href="https://unpkg.com/@waline/client@v2/dist/waline.css"
  />  
  -->
  
  
  <!-- <script async defer data-website-id="0dc17886-9c5c-4bb7-b097-104eb7c28c72" src="https://umami-production-7220.up.railway.app/umami.js"></script> -->
  
  
  <!-- Start of Howxm client code snippet -->
  <script>
  function _howxm(){_howxmQueue.push(arguments)}
  window._howxmQueue=window._howxmQueue||[];
  _howxm('setAppID','352e66d3-cc84-42ce-ac80-a43a12abf84b');
  (function(){var scriptId='howxm_script';
  if(!document.getElementById(scriptId)){
  var e=document.createElement('script'),
  t=document.getElementsByTagName('script')[0];
  e.setAttribute('id',scriptId);
  e.type='text/javascript';e.async=!0;
  e.src='https://static.howxm.com/sdk.js';
  t.parentNode.insertBefore(e,t)}})();
  </script>
  <!-- End of Howxm client code snippet -->
  
  <script type="text/javascript">
      (function(c,l,a,r,i,t,y){
          c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
          t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
          y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "jurm89uqvq");
  </script>
  
  <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo=">

  <link rel="stylesheet" href="/styles.css">

  
  <meta property="og:description" content="2016-10-31正和岛"/>
  

  
  <meta property="og:title" content="【案例】6100字彻底讲透韩都衣舍“小组制”">
  <meta property="og:type" content="article">
  

  
  <meta property="article:published_time" content="2024-03-09T23:52:57+08:00">
  <meta property="article:author" content="http://localhost:4000/">
  

  <meta property="og:url" content="http://localhost:4000/%E6%A1%88%E4%BE%8B-6100%E5%AD%97%E5%BD%BB%E5%BA%95%E8%AE%B2%E9%80%8F%E9%9F%A9%E9%83%BD%E8%A1%A3%E8%88%8D-%E5%B0%8F%E7%BB%84%E5%88%B6" />

  

  <title>
    
      【案例】6100字彻底讲透韩都衣舍“小组制” &mdash; BertrandDigitalGarden
    
  </title>
</head>

  <body>
    <nav><div>
    <a class="internal-link" href="/"><b>BertrandDigitalGarden</b></a>
</div></nav>
    <div class="wrapper">
      <main><article>
  <div>
    <h1>【案例】6100字彻底讲透韩都衣舍“小组制”</h1>
    <!-- 更新时间一直都是显示为构建时间，先屏蔽 -->
    <time datetime="">
      最后更新于 
      
    </time> 
  </div>

  <div id="notes-entry-container">
    <content>
      <html><body>
<p>2016-10-31正和岛</p>

<p>韩都衣舍的成功秘诀大家都知道是“小组制”，但是小组制究竟是怎么形成，如何运营的？却又没有几个人能够真正的说清楚。本文就从小组制开始，帮大家梳理一下韩都衣舍成功的路径与秘诀。</p>

<table>
  <tbody>
    <tr>
      <td>编辑</td>
      <td>程云深</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>供稿</td>
      <td> 蔚蓝方法100（ID：weilan_100）</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>来源</td>
      <td>正和岛（ID：zhenghedao）</td>
    </tr>
  </tbody>
</table>

<p>关于小组制，赵迎光说：“小组制”在创业之初就已出现，只是一直在摸索，不断在完善。这像是农业合作社过后的家庭联产承包责任制，通过责任到人，员工的积极性提高，从而也提高了生产力。</p>

<p>part 1 小组制的理论基础</p>

<p>赵迎光：</p>

<p>我们整个公司应该是一家纯互联网的企业，我们参考了日本的阿米巴模式。在整个商业模式创新的过程中，我们就选了阿米巴模式里边最核心的三个关健词，第一个是自由自在，第二个是重复分裂，第三个是激情四射。用这三个词做整个商业模式创新的核心的点，进行了整个的商业模式的重构。</p>

<p>我们开始做这个的时候，淘宝已经做了快6年，竞争非常激烈，女装这个行业用常规做法肯定走不通，所以我们一直在思考哪些地方做出差异化来，我们总结了三个“快”： 快速学习、快速试错、快速迭代。那么以一种什么样的形式比较充分地来实现这三个“快”？</p>

<p>于是我们反过来思考传统企业为什么慢？因为企业越大越像恐龙，他的产品没有问题了，问题在哪儿？战略决策和战术决策。传统科层制，往往是企业的核心高管、董事长这一层负责战略决策。战略决策基本上不会出大问题，水平不够的话，不可能做到企业家这个高度，但问题就出在战术决策这个中层管理人员和基层执行人员身上。企业越大，基层执行力就越差，中层就越无能为力。</p>

<p>传统的服装企业有三个核心部门，分别是研发部门、销售部门以及采购部门。一般是销售来主导，销售策略制定好了，打通了产品配合销售，采购部门去落实。这样有什么问题呢？如果今年业绩好，到底算谁的功劳，说不清楚。所以对于调动基层的主观能动性是更有限的。</p>

<p>传统企业的管理结构是从上到下，从老板到高管到中层再到最基层的员工，这种正三角。我们尝试去用一种倒三角的模式去管理，我们给整个的模式起了一个名字，就叫以小组制为核心的单品全程运营体系，这个里面核心的是产品小组，有三个人，三个人是基于产品的研发、销售，他们三个人完全在管理，然后其他的所有的公务部门为他们提供支持。所有的小组，放在最上面，所有底下的公共部门给他们做一个支持。</p>

<p>我们当时在设计我们小组制的时候有五点考虑：第一个尽量的实现全员参与的经营；第二个是精细核算到每个员工；第三个是高度透明的经营；第四个是自上而下和自下而上的结合；第五个希望培养企业更多的领导人，这个领导和非领导，我觉得非常重要的差别是决策力，有决策力算是领导，有执行力是偏员工和管理层。</p>

<p>part 2 小组制的成长轨迹</p>

<p>♢ 小组制1.0：从买手到买手小组</p>

<p>2007年之前，赵迎光折腾了好几年电商，也开了门店，但仍然对未来要干什么很迷茫，他一直在摸索，如何才能差异化？直到2007年中旬，赵迎光接触到韩国最大的一家快时尚公司。一般的公司是给生产商三四款衣服，每款生产上万件，而这家公司直接给生产商700个款式，虽然款式多，但是单款订单量却少，少则数百件，多则上千件，卖得好再返单。赵迎光恍然大悟，于是立刻尝试这种多款少量的模式。</p>

<p>刚开始公司资源有限，只能做代购，他把重心放到培养买手上，招揽一批学生，将韩语专业和服装设计专业的人搭配在一起，从韩国3000个服装品牌中挑选出1000个，分给40个人，每人每天从25个品牌的官方网站上挑出8件新品，这意味着每天有200款新品。</p>

<p>当时，淘宝搜索是按刷新时间排序，原本赵迎光只是想使产品充足、新鲜，却没想到赢得了流量。这让韩都很快跟网上千千万万个韩装店铺区别开来，竞争力一下增强。但是这种竞争力主要表现在争夺顾客的前端。</p>

<p>赵迎光很快发现这种模式在后台的问题：</p>

<p>第一是代购有几大硬伤，比如等待时间过长，无法退换货，经常断货断色断码，性价比不高等等。</p>

<p>第二是选款师没有经营意识和竞争意识。选款师上完新款之后，顾客下不下订单，这款衣服能卖多少，跟他们没什么关系。</p>

<p>于是赵迎光做出调整：</p>

<p>第一，从“代购商品”转为“代购款式”。买手像从前一样选出款式，然后交给生产部门采购样衣，打样，选料，在国内找工厂量产。</p>

<p>第二，不再要求每个人盯着25个品牌，而是全部打乱，买手之间开始竞争，培养买手的独立经营意识。</p>

<p>但是，新问题出现了：每个买手都希望上更多的产品，却不注意库存问题，只选图片上传，买手们对供应链并无太多考虑。</p>

<p>于是赵迎光抱着试试看的心理，给了一个买手2万元，让她自己决定生产件数、颜色、尺码，一旦盈利，公司和买手分成。</p>

<p>这种尝试也有问题：</p>

<p>其一，买手是设计专业出身，你让她去搞运营，终究是不行的；</p>

<p>其二，就算某个买手有经营天赋，但是他又要选款，又要考虑那些经营的事，难免哪头都顾不好。</p>

<p>于是，赵迎光把经营事务剥离了出来，但不是像以前那样，剥离给公司的生产部，而是给每个买手配上视觉人员和运营人员。</p>

<p>“买手小组”雏形初现。</p>

<p>几个月后，这种小组+分成制度的优势开始显现了，买手小组的积极性上来了，他们不仅可以找到韩国最新的时尚款式，还能找到相对靠谱的代工厂生产，降低成本，把控质量。库存周转也快起来了。</p>

<p>赵迎光索性在内部做了个试验，成立了两套班子：</p>

<p>一套是按照传统服装公司设置三个部门：设计师部、商品页面团队以及对接生产、管理订单的部门;</p>

<p>另一套系统是把三个部门的人打散，每个部门抽出1个人，3个人成立1个小组，总共10个小组。</p>

<p>两套班子同时开工，3个月后，传统班子被停掉，公司开始试用效率更高、绩效更好的小组制生产模式。</p>

<p>就这样，小组制模式成形了：买手+视觉人员+运营人员。</p>

<p>♢小组制2.0：内部资源市场化，大家都是二老板</p>

<p>2011年，韩都有了70个小组。小组一多，原来可以调配的资源，没法调了，比如公司内部的推广资源如何分配？店铺的首页，放那个小组的产品？</p>

<p>赵迎光索性给每个小组更高的自治权，款式选择、定价、生产量、促销全都由小组自己决定，小组提成根据毛利率或者资金周转率来计算，毛利和库存成了每个小组都最关注的两个指标。因此，在韩都的淘宝店里，并不会有统一的打折促销，而是每个小组根据自己商品的情况做出促销决策，以保证毛利率和资金周转率。</p>

<p>对于首页资源，他们有一个内部资源市场化的机制：成立6个月以上的小组，可以竞拍位置；成立6个月以内的，首页拿出专门的位置，让大家抢，谁手快谁抢到。</p>

<p>最重要的财权完全放开，每个小组的资金额度自由支配，而这个额度又与小组的销量直接挂钩，卖得越多，额度越大。在韩都，本月的资金额度是上个月销售额的70%。比如上个月有个小组卖了500万元，500万元的70%是350万元，那么这个月该小组可以用350万元再去下新的订单。</p>

<p>因此，每个小组都必须有很强的危机意识。假设一个小组是5万元“起家”，小组一定不会把这5万块钱都用去下订单。因为如果卖不出去，就再没有使用额度，小组必须开始卖库存。如果库存永远卖不出去，这个小组就永远没有额度，甚至会死掉。</p>

<p>死掉怎么办？死掉就“破产”“重组”呗。</p>

<p>他们会对各个品类的小组进行竞争排名，排名前三位的会得到奖励，后三名的会被打散重组。</p>

<p>这样，每个小组都是一个竞争因子，几乎就是一个小公司。这种把公司做小的理念，稻盛和夫和张瑞敏都在尝试，而韩都依托互联网的基因轻装上阵，走得更远。</p>

<p>这一阶段的使命是解决内部资源分配问题，也是韩都整个公司架构全面小组化的阶段。产品小组若是觉得之前对应的摄影小组不够好，那就换一个；若是觉得生产部某个小组协调得力，就会分配更多任务，那个小组就会有更多收入，也会更有动力。整个组织架构就像标准配件一样，可以自由对接，也确保大多数人员的收入能够跟市场绩效挂钩。</p>

<p>♢小组制3.0：为了变态的售罄率</p>

<p>2012-2013年，韩都有200多个小组，7个品牌，每年将近2万款，这个阶段最头疼的是什么?</p>

<p>供应链!</p>

<p>这就需要全局规划和单品精确管理。</p>

<p>所以，小组制又进化了，他们创建了单品全流程运营体系，公司层面则成立企划中心，用售罄率倒逼各个链条做到单款生命周期管理，并统筹全局。</p>

<p>所谓单品运营，就是以单款来考虑的，这一款衣服从设计到销售，全部有数据把控。每款产品的生命周期，都有专人精心维护。平均下来，每个月每个小组管理七八款衣服，每款给什么位置，做什么搭配，冲击爆款能到什么程度，库存水平到什么状态需要打折，长期练下来，自然得心应手。</p>

<p>企划中心则根据历史数据，在年初的时候，参考年度的波峰波谷节奏，制定目标，然后分解到各个小组，每个小组，在月度、季度、年度，都有细分的考核指标。企划部相当于韩都的发改委和数据中心，协调各小组之间的竞争。</p>

<p>企划中心的节奏控制对于韩都的供应链至关重要，能够让生产部及其工厂提前预测下一步的进度，方便备料。数万款产品下单，没有节奏控制，纯粹找死。</p>

<p>现在韩都的售罄率能够做到95%，这在服装行业是很变态的，尤其是在每年2万款的情况下。据韩都分销部负责人刘景岗透露，完成这个指标压力不大。</p>

<p>韩都为了做到这一点，将产品分为：爆旺平滞。爆款和旺款可以返单(韩都的爆款不是传统企业的那种动辄几万件，能卖2000件，在韩都就是爆款了)，平款和滞款必须立即打折促销，而且要在旺销时间，稍一打折就会售出，等到了季末，需要清仓的恶性库存自然就很少。这样一来，整个供应链反应更灵敏，品质也更易控制。当然这个过程是一点点摸索和改进的，没有历史数据的积累，也做不到预测。</p>

<p>♢小组制X：孵化“小蚂蚁”</p>

<p>现在，赵迎光在思考几个问题：韩都的子品牌阵列能一直这样无限壮大下去吗？它的边界在哪里？到了那一天要如何突破？</p>

<p>韩都在进化过程中，发展核心动力都来自于“小组制”的一次次升级。但以往的升级都是“向内”的，下一步，能不能向外开放？</p>

<p>赵迎光一直认为，许多人都有设计理念，但往往只停留在想法上，因为测试市场成本太高了。谁会为了一个创意，特地找工厂打样、生产？韩都能不能让这些“外部”的设计人员，也成为韩都小组？</p>

<p>以设计T恤为例，用户先选择版型，然后设计图案，然后选择生产数量，比如200件20元一件，200到500件19元一件，在韩都的合作工厂进行生产。接下来，韩都帮助其进行销售，团队每天出具销售报表。</p>

<p>在整个过程中，韩都有两大盈利点，一是服务费，二是通过运营数据找到有潜力的设计师，让设计师通过韩都现有的运营平台，做出“小而美”的时尚品牌。</p>

<p>如果是这样，韩都或许会由一个服装生产商逐步成为一个时尚品牌孵化平台，赵迎光将这种模式称为“时尚云”平台。值得一提的是，因为设计师可以自主选择销售平台，所以这个模式还涉及到天猫、京东、唯品会等电商，从另一个角度而言，韩都可能会用一个个服装品牌串起整个互联网行业。无独有偶，淘宝也为独立设计师单独开辟了板块。赵迎光把这些将会大量涌现的小品牌形容成小蚂蚁，小蚂蚁终会一点点吞噬掉大佬们的市场。</p>

<p>part 3 小组制背后的支撑力量</p>

<p>♢小组制需要明确责、权、利</p>

<p>第一是责任，管理层每年会跟每一个小组，在10月份的时候制定第二年的生产计划和销售计划。会跟每一个小组谈，确定每个小组打算完成多少的销售额，里面的毛利率希望多少，库存周转多少，然后就会定下来，这就是责任。</p>

<p>第二权利是什么？第一是款式，打算要上市的款式，他们自己三个人自己去商量的。第二是款式的几个颜色，几个尺码，每个颜色和尺码的库存他们三个人自己定的。第三是价格，是他们自己三个商量的定，公司只是提供一个最低加价标准，你最低不能低于多少，不能低的太不象话。</p>

<p>第三是利益，就是奖金是怎么算。非常简单，奖金=销售额×毛利率×提成系数。所以每个小组，基本上每天都可以算出来会赚多少钱。所以他的利润，他的奖金不是由公司来决定的，是自己干出来，自己算出来的。这是整个的责、权、利。</p>

<p>♢没有“淘汰机制”，怎么驱动小组优化</p>

<p>“韩都衣舍”成立以来根本没有设计淘汰机制，为什么没有设计呢？我们的小组是自动化更新的。我们每天早上十点钟会公布昨天的销售排名，比如这个品牌有20个小组，每天早上就公布昨天销售的一个排名。</p>

<p>每天排名的话，每天小组会受到一个强刺激，非常强的刺激。导致什么？第一名很兴奋，，然后他要维持第一的排名，第二名说我只要一努力就可能超越第一名，他也很兴奋，一天到晚琢磨怎么超越第一名。倒数第一想努力一点超过一名是一名，不能老垫底。每一个小组为了名次靠前一步很努力，没有加班制度，都自己加班，这是一个效果。</p>

<p>第二个小组的奖金是由组长决定怎么分配的，这个月两万块奖金组长会怎么分？会自己留一万，两个组员五千，经过一两年之后这两个组员不愿意跟组长干了，因为永远受你的剥削，经过一两年我也成熟了，能不能出去自立门户。做的差的小组，这个组长只拿了两千块钱的提成，一般自己不要钱，两个组员一千块钱，符合人性，觉得对不起兄弟们，别人拿两万，自己拿两千，不好意思拿这个钱。</p>

<p>问题拿一千块钱的组员怎么想？你这个组长太笨了，我跟你才拿一千，也不愿意跟你干。所以允许一人小组的存在，如果不想跟谁干第一时间可以提出来不和他干了，就出去。找不到搭档也可以一人成为小组，一个人先干所有的事。一人一个小组太累了，就自然会找帮手成立一个新的小组，一直持续这种过程，分裂和组合在我们公司是常态。</p>

<p>还要补充一点，公司规定如果离开原来的组长，你一年之内提成的10%，财务会自动发工资到原组长的名下，这个是辛苦费，离开的人也会理直气壮一点，我虽然走了，公司把我的奖金分10%给你，也不欠你的，组长也比较好，剥削你两年不好意思继续剥削你，你就出去挣钱，给我交点份子钱，继续剥削新人，新人也不会觉得怎么样。不断往复这样一个过程，这就是小组的生态圈。</p>

<p>♢利用“人性”驱动公共部门</p>

<p>我们公共部门也特别得有效率，为什么有效率呢？公共部门怎么会有积极性呢？因为人性无非有两种：趋利和避害。我们把避害这个放进我们制度设计里边了。因为每个小组的责权利相当明确，如果哪一个公共部门侵犯了某小组的利益，这个小组就会进行不断地投诉。</p>

<p>比如说一个司机去拉货，如果拉晚了，这个小组的组长就会去投诉他。所以为了少投诉，他就会积极地去工作。这就充分地把这个避害作为我们行政部门很重要的一个工作动力的原点。现在整个公司280多个产品小组，它是怎么分的呢？就是所有的非标准化的环节，全部由小组来做；所有标准化的环节由公司来做，我们就在企业的公共平台上培养了具有经营思维的运营人员。</p>

<p>♢小组制的缺点</p>

<p>第一个缺点，买手培养需要时间成本。师傅带徒弟模式，一般成熟要2年，经历一个春夏秋冬才有感觉，经历2个周期才会比较成熟，逐渐好转。刚开始时，只有几个小组，下单量小，没有工厂愿意接，所以，第一批买手培养很艰难。</p>

<p>第二个缺点，买手水平参差不齐，产品品质不稳定。需要设置一个首席评控官，严格控制。</p>

<p>第三个缺点，销量多批的下单模式，对供应链要求高。必须跟工厂有数据对接，需要做管理系统，但现在市面上所有的ERP系统都不适合买手小组制。</p>

<p>赵迎光：</p>

<p>时移世易。十年后的今天，“摸着石头过河”的时代已经远去。电商企业要想发展，就必须遵循互联网规律，以合乎时代的逻辑往前推演。</p>

<p>未来已来，未来已经疯狂流行，下一个十年到底应该怎样？过去的十年，韩都衣舍一直在升级，一直在创新。未来十年，创新升级的挑战更大，那是一个充满了诱惑和想象力的大未来，我们希望为大电子商务生态贡献力量、希望为“小而美”找到最佳解决方案、希望参与创造新商业文明、享受新商业文明。</p>
</body></html>
    </content>

    <side style="font-size: 0.9em">
      <h3 style="margin-bottom: 1em">反向链接：</h3>
      
      <div style="display: grid; grid-gap: 1em; grid-template-columns: repeat(1fr);">
      
        <div class="backlink-box">
        <a class="internal-link" href="/%E8%87%AA%E7%BB%84%E7%BB%87%E7%AE%A1%E7%90%86">自组织管理</a><br>
      
      </div>
      
    </side>
  </div>
</article>

<!-- <hr> -->

<!-- 图谱的性能太差，先屏蔽了 --></main>
      <footer><!-- <script src="https://giscus.app/client.js"
        data-repo="oldwinter/knowledge-garden"
        data-repo-id="R_kgDOHT-NGQ"
        data-category="备发布站的评论系统"
        data-category-id="DIC_kwDOHT-NGc4CQ3PF"
        data-mapping="og:title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="light"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script> -->
</footer>
    </div>
    <!-- That file is not particularly elegant. This will need a refactor at some point. -->
<style>
  content a.internal-link {
    border-color: #8b88e6;
    background-color: #efefff;
  }

  #tooltip-wrapper {
    background: white;
    padding: 1em;
    border: 1px solid #ddd;
    border-radius: 4px;
    overflow: hidden;
    position: absolute;
    width: 400px;
    height: 400px; /* 悬浮卡片改高一点 */
    font-size: 0.8em;
    box-shadow: 0 5px 10px rgba(0,0,0,0.1);
    opacity: 0;
    transition: opacity 100ms;
  }

  /* #tooltip-wrapper:after {
		content: "";
		position: absolute;
		z-index: 1;
		bottom: 0;
		left: 0;
		pointer-events: none;
		background-image: linear-gradient(to bottom, rgba(255,255,255, 0), rgba(255,255,255, 1) 90%);
		width: 100%;
		height: 75px;
  } */
</style>
<!-- 给悬浮预览卡片加滚动条。 -->
<div style="opacity: 0; display: none; overflow-y: scroll;" id='tooltip-wrapper'>
  <div id='tooltip-content'>
  </div>
</div>

<iframe style="display: none; height: 0; width: 0;" id='link-preview-iframe' src="">
</iframe>

<script>
  var opacityTimeout;
  var contentTimeout;
  var transitionDurationMs = 100;

  var iframe = document.getElementById('link-preview-iframe')
  var tooltipWrapper = document.getElementById('tooltip-wrapper')
  var tooltipContent = document.getElementById('tooltip-content')

  function hideTooltip() {
    opacityTimeout = setTimeout(function() {
      tooltipWrapper.style.opacity = 0;
      contentTimeout = setTimeout(function() {
        tooltipContent.innerHTML = '';
        tooltipWrapper.style.display = 'none';
      }, transitionDurationMs + 1);
    }, transitionDurationMs)
  }

  function showTooltip(event) {
    var elem = event.target;
    var elem_props = elem.getClientRects()[elem.getClientRects().length - 1];
    var top = window.pageYOffset || document.documentElement.scrollTop

    if (event.target.host === window.location.host) {
      iframe.src = event.target.href
      iframe.onload = function() {
        tooltipContentHtml = ''
        tooltipContentHtml += '<div style="font-weight: bold;">' + iframe.contentWindow.document.querySelector('h1').innerHTML + '</div>'
        tooltipContentHtml += iframe.contentWindow.document.querySelector('content').innerHTML

        tooltipContent.innerHTML = tooltipContentHtml

        tooltipWrapper.style.display = 'block';
        setTimeout(function() {
          tooltipWrapper.style.opacity = 1;
        }, 1)
      }

      tooltipWrapper.style.left = elem_props.left - (tooltipWrapper.offsetWidth / 2) + (elem_props.width / 2) + "px";
      if ((window.innerHeight - elem_props.top) < (tooltipWrapper.offsetHeight)) {
          tooltipWrapper.style.top = elem_props.top + top - tooltipWrapper.offsetHeight - 10 + "px";
      } else if ((window.innerHeight - elem_props.top) > (tooltipWrapper.offsetHeight)) {
          tooltipWrapper.style.top = elem_props.top + top + 35 + "px";
      }

      if ((elem_props.left + (elem_props.width / 2)) < (tooltipWrapper.offsetWidth / 2)) {
          tooltipWrapper.style.left = "10px";
      } else if ((document.body.clientWidth - elem_props.left - (elem_props.width / 2)) < (tooltipWrapper.offsetWidth / 2)) {
          tooltipWrapper.style.left = document.body.clientWidth - tooltipWrapper.offsetWidth - 20 + "px";
      }
    }
  }

  function setupListeners(linkElement) {
    linkElement.addEventListener('mouseleave', function(_event) {
      hideTooltip();
    });

    tooltipWrapper.addEventListener('mouseleave', function(_event) {
      hideTooltip();
    });

    linkElement.addEventListener('touchend', function(_event) {
      hideTooltip();
    });

    tooltipWrapper.addEventListener('touchend', function(_event) {
      hideTooltip();
    });

    linkElement.addEventListener('mouseenter', function(event) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
      showTooltip(event);
    });

    tooltipWrapper.addEventListener('mouseenter', function(event) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
    });
  }

  document.querySelectorAll('content a').forEach(setupListeners);
</script>

  </body>
</html>
