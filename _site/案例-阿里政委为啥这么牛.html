<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">

  <link rel="canonical" href="http://localhost:4000/%E6%A1%88%E4%BE%8B-%E9%98%BF%E9%87%8C%E6%94%BF%E5%A7%94%E4%B8%BA%E5%95%A5%E8%BF%99%E4%B9%88%E7%89%9B" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="description" content="            来源      HRUP第46期微课（联合HR精品课举办）      ">

  <meta property="og:site_name" content="BertrandDigitalGarden">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-DBYSXF7WKD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-DBYSXF7WKD');
  </script> -->
  
  <!-- 
  <script src="https://unpkg.com/@waline/client@v2/dist/waline.js"></script>
  <link
    rel="stylesheet"
    href="https://unpkg.com/@waline/client@v2/dist/waline.css"
  />  
  -->
  
  
  <!-- <script async defer data-website-id="0dc17886-9c5c-4bb7-b097-104eb7c28c72" src="https://umami-production-7220.up.railway.app/umami.js"></script> -->
  
  
  <!-- Start of Howxm client code snippet -->
  <script>
  function _howxm(){_howxmQueue.push(arguments)}
  window._howxmQueue=window._howxmQueue||[];
  _howxm('setAppID','352e66d3-cc84-42ce-ac80-a43a12abf84b');
  (function(){var scriptId='howxm_script';
  if(!document.getElementById(scriptId)){
  var e=document.createElement('script'),
  t=document.getElementsByTagName('script')[0];
  e.setAttribute('id',scriptId);
  e.type='text/javascript';e.async=!0;
  e.src='https://static.howxm.com/sdk.js';
  t.parentNode.insertBefore(e,t)}})();
  </script>
  <!-- End of Howxm client code snippet -->
  
  <script type="text/javascript">
      (function(c,l,a,r,i,t,y){
          c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
          t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
          y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "jurm89uqvq");
  </script>
  
  <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo=">

  <link rel="stylesheet" href="/styles.css">

  
  <meta property="og:description" content="            来源      HRUP第46期微课（联合HR精品课举办）      "/>
  

  
  <meta property="og:title" content="【案例】阿里政委为啥这么牛？">
  <meta property="og:type" content="article">
  

  
  <meta property="article:published_time" content="2024-03-09T23:52:57+08:00">
  <meta property="article:author" content="http://localhost:4000/">
  

  <meta property="og:url" content="http://localhost:4000/%E6%A1%88%E4%BE%8B-%E9%98%BF%E9%87%8C%E6%94%BF%E5%A7%94%E4%B8%BA%E5%95%A5%E8%BF%99%E4%B9%88%E7%89%9B" />

  

  <title>
    
      【案例】阿里政委为啥这么牛？ &mdash; BertrandDigitalGarden
    
  </title>
</head>

  <body>
    <nav><div>
    <a class="internal-link" href="/"><b>BertrandDigitalGarden</b></a>
</div></nav>
    <div class="wrapper">
      <main><article>
  <div>
    <h1>【案例】阿里政委为啥这么牛？</h1>
    <!-- 更新时间一直都是显示为构建时间，先屏蔽 -->
    <time datetime="">
      最后更新于 
      
    </time> 
  </div>

  <div id="notes-entry-container">
    <content>
      <html><body>
<table>
  <tbody>
    <tr>
      <td>来源</td>
      <td>HRUP第46期微课（联合HR精品课举办）</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>嘉宾</td>
      <td>陈祖鑫（口述）</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>整理</td>
      <td>HRUP小冰（文字整理）</td>
    </tr>
  </tbody>
</table>

<p>小冰推荐：</p>

<p>阿里政委在外界看来一直是个神秘的组织，权力惊人，非常强势。陈老师的这节课程，从阿里政委的起源、架构设置、工作内容等三大方面全盘解构阿里政委体系，同时也给出了我们如何借鉴阿里政委体系的建议。</p>

<p>01</p>

<p>政委是怎么来的？</p>

<p>一、政委的起源</p>

<p>政委全称叫政治委员制度，来源于意大利共和国雇佣军。政委制度用得最好的是我党，我党的军队，政治等都用过政委体系，包括在大学里都有相应的辅导员制度，其背后有一套非常有好的逻辑，主要有两点：</p>

<p>1）枪杆子：起到制衡和监督的作用。</p>

<p>2）笔杆子：起到组织文化方面的引导和管理。企业层面，就是价值观的洗礼、团队文化的塑造，思想上的统一。企业为什么要设置政委制度？也是希望HR能够在枪杆子和笔杆子上发挥作用。</p>

<p>二、阿里巴巴为什么要用政委制度呢？</p>

<p>1）业务上的原因：</p>

<p>2004年，阿里巴巴的B2B业务高速发展，人才不够用，从人力资源配置来讲，就需要有另外一条有管理经验的线，有经验有文化的专业线，可以辅助业务部门的经理，建设好队伍。</p>

<p>2）战略上的原因：</p>

<p>阿里巴巴希望存活102年，政委设立的初衷是想保证企业能够长远地发展，避免业务经理因为短期的业绩压力而采取短期的做法，业务部门的人看季度完成目标即可，而政委至少要看1-2年，甚至3-5年的长远目标。</p>

<p>在2004年到2005年期间，阿里巴巴设立政委的灵感来自于当时的军事题材电视剧《历史的天空》和《亮剑》。阿里的创始人马云和他的团队，一直在想如何在公司层级的增多，跨区域发展的背景下，一线员工依然能保持价值观的传承，同时业务和人力资源培养方面，有快捷的支持，政委体系就是一个巧妙的载体。</p>

<p>所以阿里在2004年-2005年推出了政委体系，2008年-2009年之后，阿里推出了HRBP体系，当时包括国内的很多企业都在陆续引进西方的三支柱体系以后，阿里巴巴才将政委体系转变成了如今的HRBP体系。</p>

<p>阿里的政委体系并不完全等同于HRBP体系，它的政委体系将会优先于国内其他BP体系的发展。</p>

<p>相同点：基于企业的发展和需求，突破于六大模块的创新。</p>

<p>不同点：BP来自于国外的理论，而政委体系来自于阿里巴巴的土生土长。</p>

<p>三、阿里巴巴有四个发展时期，匹配它的政委发展。</p>

<p><img src="FBA471DA2BF746C8B2299ED6D265F66F.webp" alt=""></p>

<p>1）政委种子期：</p>

<p>1999年-2003年是阿里巴巴培养政委体系的种子期。最关键的一年是在1999年，阿里巴巴B2B有一个核心产品：中国供应商，一种直销的体系，中国供应商衍生出阿里铁军，铁军文化衍生出政委体系，是这么一个水到渠成的过程。</p>

<p>2）政委萌芽期：</p>

<p>2003年非典时期，阿里巴巴有了他们的淘宝，淘宝激活了C端市场，同时又反过来关联了B2B,B2C的市场。</p>

<p>3）政委发展期：</p>

<p>2009年以后，阿里巴巴的天猫上线，还有蚂蚁金服，阿里云，菜鸟物流，业务体系急速扩张。</p>

<p>4）政委生态期：</p>

<p>2014年之后，阿里巴巴提出了大数据时代，电子商务平台化，更多的时候是成为这个生态的端，云，还有金融，有生活，有音乐，有体育，各个领域都已经在生态化，所以阿里的政委也在往生态化的方向发展。</p>

<p>重点讲阿里巴巴的生态政委，我有三个观点。</p>

<p>第一、业务生态化。</p>

<p>阿里的政委生态化一定源于业务的生态化。阿里的业务已经多元化，基本上无孔不入，从购物到支付，从媒体到社交，我们生活的每个角落，每个场景，每个入口，都植入了阿里的业务。</p>

<p>第二、文化生态化。</p>

<p>大家都听过阿里的六脉神剑价值观，要求员工守住高压线，坚持客户第一，团队合作，拥抱变化，保持激情，诚信敬业，这6条法则很多公司都有所借鉴。</p>

<p>这已经有点像互联网公司的普世价值观，已经在生态化了</p>

<p>第三、人员生态化。</p>

<p>阿里政委的人员趋向于生态化，不只是阿里内部培养的政委，现在很多企业都在用阿里巴巴的政委体系，从这节课开始，听课的每位都是阿里政委孵化的一颗种子，当我们枝繁叶茂的时候，阿里的政委体系也在随之壮大。</p>

<p>四、阿里的政委体系出现是偶然还是必然？</p>

<p>中西合璧，政经结合。</p>

<p>国内的企业形式远远没有赶上欧美企业，员工普遍缺乏，职业感和事业感。西方的成熟理论都是基于社会大分工，如果我们直接照搬西方的管理理论，肯定是过犹不及。比较理想的方式是以中式的政委为主，辅以西方的HR管理，双管齐下，互为补充。</p>

<p>五、阿里巴巴的政委和传统的人力资源差别在哪里？</p>

<p><img src="3367BAF5A75048AA84AF86841706618F.webp" alt=""></p>

<p>六、阿里政委体系相比于传统人力资源体系有哪些创新？</p>

<p>1）贴近业务</p>

<p>传统HR会自成一体，与业务部门分离。阿里政委，包括现在的BP模式，是希望把传统的HR部门拆掉，把BP派驻到业务线，让政委更贴近业务线，更了解业务，更有效地支持和服务。</p>

<p>2）端对端的交付</p>

<p>传统HR是职能分工，分头支持业务，从业务提出需求到HR满足需求，这当中很容易脱节。而政委是中端，强调端对端，把握中间环节。</p>

<p>02</p>

<p>阿里政委是如何设置的？</p>

<p>一、阿里政委的定位：上得厅堂，下得厨房。</p>

<p>上得厅堂：能进行组织诊断，发现真正的问题，具备HR专业能力，提出并实施解决方案。</p>

<p>下得厨房：做有温度的HR，陪伴和跟随员工成长，有独立的思考和判断，敢于说真话丑话。</p>

<p>二、阿里政委和业务经理的关系。</p>

<p>监督与制衡：阿里政委在用人、组织文化方面有一票否决权。对于业务经理，一方面在思想上、方向上进行指引和帮助，另一方面，对于业务线的决策有明显制衡作用。</p>

<p>作用力与反作用力：业务线关注短期目标，业绩导向；政委关注长期目标，文化传承和干部培养，两者之间是一对作用力与反作用力。</p>

<p>三、阿里的政委都是女生吗？</p>

<p>阿里巴巴也有男政委，跟女政委的工作一样，男政委负责除了薪酬，专业OD等之外的HR工作。有一个阿里政委能知道所有女生的生理期，每个员工家里有几个小孩，知道同事今天有什么样的状况，所以做阿里的政委没有那么高大上，有的很辛苦，需要做得很细致。</p>

<p>四、阿里的政委目标是什么？</p>

<p>四个核心目标：</p>

<p>1）懂业务：如果不懂业务，没法和业务经理达成真正的默契。</p>

<p>2）提效能：不遗余力地提升所在部门的人效产出。</p>

<p>3）促人才：促进整个团队人才的增值和成长。</p>

<p>4）推文化：推动公司价值观和文化的落地。</p>

<p>五、阿里政委的四个角色</p>

<p>学过HRBP理论都知道尤里奇提出的HRBP四个角色：变革推动者，战略合作伙伴，员工代言人，运营专家。</p>

<p>而阿里政委的四个角色：人的合作伙伴，公司与员工的同心结，企业文化的代言人，帮助员工成长的角色。</p>

<p>六、阿里政委六个画像，分三层。</p>

<p>1）第一层：正能量和好奇心。</p>

<p>这源自于阿里政委的个人特征。如果没有正能量，怎么去稳定团队？可以观察我们身边的阿里人，不管是做业务还是做HR，老阿里人都特别有激情，好像都自带血包，不用睡觉，有不断奔跑的能量。好奇心是希望每个阿里人，能够不断地拥抱新的时代。</p>

<p>我认识的阿里小政委，其实工作年限都很长，但是跟90后一起学习的时候，态度都非常谦卑，给我的印象非常深刻。我曾经写过一篇文章，我们为什么追不上阿里的政委，首先人家已经在混生态，借着生态的力量成长，第二他们一直保持着好奇心，保持饥饿和童真。而我们很多90后的HR们已经老气横秋了。</p>

<p>2）第二层：知心姐姐和贴心小棉袄。</p>

<p>每个组织都有一些弱势员工或者问题员工，他们经常被边缘化和忽视，阿里政委不会轻易放弃这些员工。这时就需要知心姐姐和贴心小棉袄的角色出现，贴心小棉袄的另一层含义是要做有温度的HR，要感觉团队的冷暖变化，要了解员工个人，家庭等生活情况，这样才能有效地提供帮助。</p>

<p>3）第三层：指明灯和协作对抗。</p>

<p>指明灯给迷失的员工指路，让自信的员工更笃定。有的员工需要大棒，有的员工需要糖，HR就要精准地交付。协作不是简单地支持，是要下决心去做，同时要承担责任。而一般的HR都不敢做，习惯了这个事情不归我管。</p>

<p>七、阿里政委发挥了什么样的作用：</p>

<p>推力：好比开车，这个动作叫加油。</p>

<p>很多创业公司都喜欢推明星员工，业绩就会立竿见影。但是当明星员工和团队出走以后，公司就岌岌可危了。 所以HR要主动推动变革，从明星员工和团队中提取基因，萃取经验，让这个团队的其他成员可以复制和传承下去，这时就需要HR要有很强的推动作用。</p>

<p>拉力：还是比作开车，这个动作就叫踩刹车。</p>

<p>业务线永远会关注眼前KPI，如果没有完成KPI，这个团队可能就完了。过度关注KPI会导致本位主义，很多部门会强行凑业绩，这种违背公司价值观的事情，HR一定要站出来干预。</p>

<p>八、做阿里政委还是不太容易，他们有两大特性。</p>

<p>悟性：“在阿里做政委，需要有悟性，他们就像老和尚教小和尚一样，不会有清晰明确的要求，如果你试图寻求明确的要求，那就不够阿里味儿。在阿里，很多领域没有文字或者明确的要求，都是靠自己总结的，不会有人明确地告诉你该如何做”。</p>

<p>灵性：“在阿里，很多决策权在下面而不是等着上面的指令，这样就形成了一个高效的工作网络，这个网络中 的节点是由每一个小的战斗单位构成的，他们拥有充分的决策权。也就形成了自下而上的、自我驱动的机制”。</p>

<p>九、阿里政委架构</p>

<p><img src="https://mp.weixin.qq.com/data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt=""></p>

<p>这样的架构设计并不代表HR没有向业务线汇报，只是说HR线会在公司里有比较强的话语权。因为马云是教师出身，所以他会对政委这条线很重视，跟小马哥和李彦宏完全不一样。</p>

<p>03</p>

<p>阿里政委是如何开展工作的？</p>

<p>一、阿里政委的能力模型</p>

<p>1）判断力：判断力其实就是洞察力。团队有什么问题，组织有怎样的温度，HR要提前感知确认，并且预知接下来会有怎样的发生，变化和结果，且有相应的预防措施。</p>

<p>2）运营力：HR能不能在组织运营过程中，配合业务策略去完成内容的落地。</p>

<p>3）专业力：从员工关系，招聘，培训，绩效都要精通。很多阿里政委也在兼做全区域的工作，比如员工成长，黑名单，圆桌等管理工作。阿里政委的并不像大家想得那么神秘，但确实又多了很多其他工作。</p>

<p>二、阿里政委的特色工作。</p>

<p>1）通业务：经常说的有“三陪”，培训（陪同学习员工需要了解的基本业务、文化知识），陪练（陪着员工去练习业务管理的场景），陪访（陪着员工访问客户）。</p>

<p>2）闻味道：用专业的诊断和模型测评团队。阿里有一些工具：六个盒子，对组织进行判断，上半年都会做一些盘点，这都是闻味道的抓手。反复观察，反复沟通，悟出来调研不到的内容。跟团队通过正式和非正式的沟通，看看团队，看看组织，看看个人。</p>

<p>3）摸温度：要去感知团队的目前状况。阿里会用一些专业的OD工具：三板斧，六个盒子等，还有通过“共创会”将价值观摇摆的人识别出来。</p>

<p>4）照镜子：对待上级有胆量，对待平级有肺腑，对待下级有心肝。照镜子还有一个关键抓手：以别人为镜子，创造一个简单信任的团队氛围。</p>

<p>04</p>

<p>我们如何借鉴阿里政委体系？</p>

<p>一、阿里政委的玩法如何借鉴？</p>

<p>1）行业：阿里政委目前在阿里系和淘宝系落地比较顺利，特别是电商，互联网O2O的成长公司。</p>

<p>2）规模：劳动密集型，团队成员比较多，落地效果较明显。</p>

<p>3）企业文化：阿里政委适合的是以销售文化为导向的公司，而不是工程师文化和精英文化。</p>

<p>4）主营业务：地推、电销，客服等。</p>

<p>二、政委体系应该怎么落地？</p>

<p>1）定位明确：公司上层要定位好政委的作用，是贴心小棉袄还是提升组织效能，业绩提升。</p>

<p>2）职责明确：上层定位明确后，下层要把价值观、愿景、员工的信仰，行为，习惯捆在一起，这样政委可以找到抓手，知道政委跟原来的HR区别在哪儿。</p>

<p>三、阿里政委（HRBP）的汇报线</p>

<p>阿里政委在文化和价值观中占了很大的比重，一定是归人力资源管理。阿里的政委都会由总部派出去，好处是能够调动总部的资源，坏处是很难得到业务真正的信任。所以派驻式适合新成立的项目和公司。</p>

<p>汇报线：大部分的HRBP汇报给业务线，劳动关系已经转到了BU。这时会出现总部的人力资源部对BP的管控力度变弱，最极端的情况，政委和BP都会淹没在业务线里。</p>

<p>我们的建议是采取渐进式的，有些团队需要更多的人力资源支持，那么汇报线倾向于总部，而有些团队已经自成体系，那么汇报线倾向于业务线。</p>

<p>四、阿里巴巴的人力资源配置</p>

<p><img src="AF2978F124174F6B89AF3E0E793A1655.webp" alt=""></p>

<p>如果其他公司要借鉴阿里的政委体系，先考虑自身有没有能力做三支柱。</p>

<p>阿里政委能有效地做业务沟通，员工情况的摸底，那是因为他们企业目前三个支柱的支持。人家资源专家中心，企业内部薪酬福利，组织发展，员工关系等会由这些专家来承担。人力资源共享中心，员工的薪酬，入转调离等都会有共享中心来提供服务。政委有了这两大支撑以后，才能更好地做好他自己的工作。</p>

<p>五、阿里政委怎么成长的？</p>

<p>三重境界</p>

<p>1）享受孤独：不管是做政委还是BP，在业务团队内部，当爹又当妈，走起来越来越孤独，这种孤独很难用语言描述，学会享受就对了。</p>

<p>3）克服焦虑：当你BP做到一定时候，你不知道往哪里走，在我们推行三支柱的时候，有的公司一会推政委一会推BP，一会要组织升级，一会要保持稳定，在焦虑的组织里头，HR很纠结很痛苦很迷茫，但是只要接受它，扛过去就好了。</p>

<p>4）学会忘我：我们很难回到原点。拿我自己来说，我不是很喜欢上课，我更喜欢搭台子让其他老师上台讲。但是有很多粉丝要求我上台讲，我就这么讲了2-3年，做到现在我都忘了自己的定位，但好像我都没有错过什么。</p>

<p>六、跳出阿里政委的能力模型，HRBP成长的四个阶梯</p>

<p>1）海量积累：想海绵一样吸收，做碎片化的吸收，像钉子一样去做专业的研究，做社交化的连接。</p>

<p>2）结构化梳理：自我梳理。跟Excel表格一样，要把自己的核心能力和机会点，做一个垂直和水平的梳理。</p>

<p>因为你一定要有很多不同的目标，但是外部有很多约束性的条件。你有什么资源，你的核心能力是什么，跟其他同事相比，你的优势是什么？除了做好本职工作，还可以尝试兼职做其他企业的HR，或者转型做讲师，做培训，做人才顾问。做行业版的HR，不要只拘泥于一个平台。</p>

<p>3）个性化呈现：跟PPT一样，可以用一句话，一个图就能精准表达一个意思。也可以像我一样，不停地重复，传播你的情怀。</p>

<p>4）扎根业务：根据我们的调查，做得好HR不是HR出生，做得好的HRBP也不是HR出身。因为业务出身的BP对于业务天生有种敏感度，我们HR就缺乏这种感知，所以我们HRBP要去做业务，往业务里扎，而不是跟HR混在一起，提高业务理解能力，具体解决经营问题。</p>

<p>我们要学会够一手的资料，学会捕捉资料，对标学习，跟我们阿里的政委，华为的BP，腾讯的HR们学习，面对面交流，分享式学习，最后希望大家今天都能有所收获。</p>

<ul>
  <li>End -</li>
</ul>

<table>
  <tbody>
    <tr>
      <td>回复【49】报名微课</td>
      <td>招聘利器：内部推荐</td>
    </tr>
  </tbody>
</table>

<p>回复【招聘】获取100个招聘渠道汇总</p>

<p>回复【实名群】与500个HR同行交流学习</p>

<p>回复【大礼包】获取20节HR干货课程</p>

<p>▼▼▼</p>

<p>HRUP线下公开课，历史最低价格，最高性价比</p>

<p><img src="EC0B37B0704948BFAE5314AEA7FFC0E1.webp" alt=""></p>

<p>点击阅读原文查看课程详情</p>
</body></html>
    </content>

    <side style="font-size: 0.9em">
      <h3 style="margin-bottom: 1em">反向链接：</h3>
      

      <div style="font-size: 0.9em">
        <p>
          There are no notes linking to this note.
        </p>
      </div>
      
    </side>
  </div>
</article>

<!-- <hr> -->

<!-- 图谱的性能太差，先屏蔽了 --></main>
      <footer><!-- <script src="https://giscus.app/client.js"
        data-repo="oldwinter/knowledge-garden"
        data-repo-id="R_kgDOHT-NGQ"
        data-category="备发布站的评论系统"
        data-category-id="DIC_kwDOHT-NGc4CQ3PF"
        data-mapping="og:title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="light"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script> -->
</footer>
    </div>
    <!-- That file is not particularly elegant. This will need a refactor at some point. -->
<style>
  content a.internal-link {
    border-color: #8b88e6;
    background-color: #efefff;
  }

  #tooltip-wrapper {
    background: white;
    padding: 1em;
    border: 1px solid #ddd;
    border-radius: 4px;
    overflow: hidden;
    position: absolute;
    width: 400px;
    height: 400px; /* 悬浮卡片改高一点 */
    font-size: 0.8em;
    box-shadow: 0 5px 10px rgba(0,0,0,0.1);
    opacity: 0;
    transition: opacity 100ms;
  }

  /* #tooltip-wrapper:after {
		content: "";
		position: absolute;
		z-index: 1;
		bottom: 0;
		left: 0;
		pointer-events: none;
		background-image: linear-gradient(to bottom, rgba(255,255,255, 0), rgba(255,255,255, 1) 90%);
		width: 100%;
		height: 75px;
  } */
</style>
<!-- 给悬浮预览卡片加滚动条。 -->
<div style="opacity: 0; display: none; overflow-y: scroll;" id='tooltip-wrapper'>
  <div id='tooltip-content'>
  </div>
</div>

<iframe style="display: none; height: 0; width: 0;" id='link-preview-iframe' src="">
</iframe>

<script>
  var opacityTimeout;
  var contentTimeout;
  var transitionDurationMs = 100;

  var iframe = document.getElementById('link-preview-iframe')
  var tooltipWrapper = document.getElementById('tooltip-wrapper')
  var tooltipContent = document.getElementById('tooltip-content')

  function hideTooltip() {
    opacityTimeout = setTimeout(function() {
      tooltipWrapper.style.opacity = 0;
      contentTimeout = setTimeout(function() {
        tooltipContent.innerHTML = '';
        tooltipWrapper.style.display = 'none';
      }, transitionDurationMs + 1);
    }, transitionDurationMs)
  }

  function showTooltip(event) {
    var elem = event.target;
    var elem_props = elem.getClientRects()[elem.getClientRects().length - 1];
    var top = window.pageYOffset || document.documentElement.scrollTop

    if (event.target.host === window.location.host) {
      iframe.src = event.target.href
      iframe.onload = function() {
        tooltipContentHtml = ''
        tooltipContentHtml += '<div style="font-weight: bold;">' + iframe.contentWindow.document.querySelector('h1').innerHTML + '</div>'
        tooltipContentHtml += iframe.contentWindow.document.querySelector('content').innerHTML

        tooltipContent.innerHTML = tooltipContentHtml

        tooltipWrapper.style.display = 'block';
        setTimeout(function() {
          tooltipWrapper.style.opacity = 1;
        }, 1)
      }

      tooltipWrapper.style.left = elem_props.left - (tooltipWrapper.offsetWidth / 2) + (elem_props.width / 2) + "px";
      if ((window.innerHeight - elem_props.top) < (tooltipWrapper.offsetHeight)) {
          tooltipWrapper.style.top = elem_props.top + top - tooltipWrapper.offsetHeight - 10 + "px";
      } else if ((window.innerHeight - elem_props.top) > (tooltipWrapper.offsetHeight)) {
          tooltipWrapper.style.top = elem_props.top + top + 35 + "px";
      }

      if ((elem_props.left + (elem_props.width / 2)) < (tooltipWrapper.offsetWidth / 2)) {
          tooltipWrapper.style.left = "10px";
      } else if ((document.body.clientWidth - elem_props.left - (elem_props.width / 2)) < (tooltipWrapper.offsetWidth / 2)) {
          tooltipWrapper.style.left = document.body.clientWidth - tooltipWrapper.offsetWidth - 20 + "px";
      }
    }
  }

  function setupListeners(linkElement) {
    linkElement.addEventListener('mouseleave', function(_event) {
      hideTooltip();
    });

    tooltipWrapper.addEventListener('mouseleave', function(_event) {
      hideTooltip();
    });

    linkElement.addEventListener('touchend', function(_event) {
      hideTooltip();
    });

    tooltipWrapper.addEventListener('touchend', function(_event) {
      hideTooltip();
    });

    linkElement.addEventListener('mouseenter', function(event) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
      showTooltip(event);
    });

    tooltipWrapper.addEventListener('mouseenter', function(event) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
    });
  }

  document.querySelectorAll('content a').forEach(setupListeners);
</script>

  </body>
</html>
