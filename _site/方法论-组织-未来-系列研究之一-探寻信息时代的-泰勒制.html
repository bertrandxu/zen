<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">

  <link rel="canonical" href="http://localhost:4000/%E6%96%B9%E6%B3%95%E8%AE%BA-%E7%BB%84%E7%BB%87-%E6%9C%AA%E6%9D%A5-%E7%B3%BB%E5%88%97%E7%A0%94%E7%A9%B6%E4%B9%8B%E4%B8%80-%E6%8E%A2%E5%AF%BB%E4%BF%A1%E6%81%AF%E6%97%B6%E4%BB%A3%E7%9A%84-%E6%B3%B0%E5%8B%92%E5%88%B6" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="description" content="阿里研究院(宋斐 阿里研究院) ·">

  <meta property="og:site_name" content="BertrandDigitalGarden">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-DBYSXF7WKD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-DBYSXF7WKD');
  </script> -->
  
  <!-- 
  <script src="https://unpkg.com/@waline/client@v2/dist/waline.js"></script>
  <link
    rel="stylesheet"
    href="https://unpkg.com/@waline/client@v2/dist/waline.css"
  />  
  -->
  
  
  <!-- <script async defer data-website-id="0dc17886-9c5c-4bb7-b097-104eb7c28c72" src="https://umami-production-7220.up.railway.app/umami.js"></script> -->
  
  
  <!-- Start of Howxm client code snippet -->
  <script>
  function _howxm(){_howxmQueue.push(arguments)}
  window._howxmQueue=window._howxmQueue||[];
  _howxm('setAppID','352e66d3-cc84-42ce-ac80-a43a12abf84b');
  (function(){var scriptId='howxm_script';
  if(!document.getElementById(scriptId)){
  var e=document.createElement('script'),
  t=document.getElementsByTagName('script')[0];
  e.setAttribute('id',scriptId);
  e.type='text/javascript';e.async=!0;
  e.src='https://static.howxm.com/sdk.js';
  t.parentNode.insertBefore(e,t)}})();
  </script>
  <!-- End of Howxm client code snippet -->
  
  <script type="text/javascript">
      (function(c,l,a,r,i,t,y){
          c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
          t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
          y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "jurm89uqvq");
  </script>
  
  <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo=">

  <link rel="stylesheet" href="/styles.css">

  
  <meta property="og:description" content="阿里研究院(宋斐 阿里研究院) ·"/>
  

  
  <meta property="og:title" content="【方法论】“组织@未来”系列研究之一：探寻信息时代的“泰勒制”">
  <meta property="og:type" content="article">
  

  
  <meta property="article:published_time" content="2024-03-09T23:52:57+08:00">
  <meta property="article:author" content="http://localhost:4000/">
  

  <meta property="og:url" content="http://localhost:4000/%E6%96%B9%E6%B3%95%E8%AE%BA-%E7%BB%84%E7%BB%87-%E6%9C%AA%E6%9D%A5-%E7%B3%BB%E5%88%97%E7%A0%94%E7%A9%B6%E4%B9%8B%E4%B8%80-%E6%8E%A2%E5%AF%BB%E4%BF%A1%E6%81%AF%E6%97%B6%E4%BB%A3%E7%9A%84-%E6%B3%B0%E5%8B%92%E5%88%B6" />

  

  <title>
    
      【方法论】“组织@未来”系列研究之一：探寻信息时代的“泰勒制” &mdash; BertrandDigitalGarden
    
  </title>
</head>

  <body>
    <nav><div>
    <a class="internal-link" href="/"><b>BertrandDigitalGarden</b></a>
</div></nav>
    <div class="wrapper">
      <main><article>
  <div>
    <h1>【方法论】“组织@未来”系列研究之一：探寻信息时代的“泰勒制”</h1>
    <!-- 更新时间一直都是显示为构建时间，先屏蔽 -->
    <time datetime="">
      最后更新于 
      
    </time> 
  </div>

  <div id="notes-entry-container">
    <content>
      <html><body>
<p>阿里研究院(宋斐 阿里研究院) ·</p>

<p>2015-03-21 18:32</p>

<p>1908年，哈佛商学院成立，是为美国第一家授予MBA学位、传播现代管理知识的研究生院。同年，第一辆福特T型车问世。
1911年，泰勒的《科学管理原理》正式出版，标志着“泰勒制”的逐步成熟，它至今仍是支撑现代社会里组织运作的基本构件，被德鲁克认为是“美国对西方思想做出的最特殊的贡献”之一。
1913年，福特在高地公园工厂创立了全世界第一条汽车流水装配线，标志着“福特制”的成熟。
100年前的1915年月日，现代企业管理奠基人泰勒逝世。
正是“福特制泰勒制”，锻造了工业时代美国经济在微观企业层面上最为坚实的内核，夯实了美国经济在世纪的全球竞争力。世纪年代，“泰勒制”和“福特制”一起，在美国各个工业部门得到了推广，也即“产业合理化运动”。到年，工人实际工资增长一倍，每周工作时间从小时降至小时。但到年劳动效率却提高了。年美国工业产值占世界第4，1913年已占世界工业总产品的三分之一超过了英法德日四国总和。一位历史学家所罗门·法布里坎特把这一时期生产率的快速提高归结为三个因素：“一是大批量的生产方法；二是以泰勒为代表的科学管理学说；三是更好更廉价的动力来源。”
100年倏忽而过，今天全球正在由工业时代加速转入信息时代。此时此刻，关于组织模式变革的真命题与大命题是什么？或者，借用加里哈默的提问：“世纪的前至年内，能够像世纪早期那样，产生革命性的管理原理吗？”
关于“信息时代的组织模式”，这一领域仍是一个不无混沌的、行进中的故事。但近年来，关于未来组织的共识，以及组织变革的方向感，却已有了很大的进展。在此，笔者试图努力去放大那些真正具有未来指向的重要信号，从而对这一领域的演化，寻求更为清晰的梳理和界定。
反思：仅仅优化是不够的
中国企业管理的领军人张瑞敏提到：“当前的企业和经济学界有一个现象就是，全世界都在学管理，但是现在大家都感觉往前走不动了。”
索尼董事长出井伸之曾感慨，“新一代基于互联网企业的核心能力，在于利用新模式和新技术更加贴近消费者、深刻理解需求、高效分析信息并做出预判，所有传统的产品公司，都只能沦为这种新型用户平台级公司的附庸，其衰落不是管理能扭转的。”
年，与迈克尔·哈默合著《企业再造》一书的詹姆斯·钱皮反思说：“当今企业管理所涵盖的那些基础范畴的理论，已经没有太多可以创新的空间。”
《追求卓越》自1982年出版后，全球发行量高达千万册。但作者汤姆••彼得斯在这本书出版年之际，却发出了《真诚的忏悔》一文：“第一条新原则是什么？是（God alone knows，即‘天知道’）……这全是重大试验，是还在进行中的工作，是一个变化着的盛宴，一个实时的进化故事。有人告诉你他知道会出现什么吗？别信他！第二条原则是：（screw around vigorously，即‘大胆闯’）。……现在，很多人在担心如何清理这场由崩盘引起的过度混乱的局面……不管这些公司让我们付出什么代价，都是低廉的……过去年我们学到的东西比商业史上任何时间学到的都要多。”
种种反思与困惑，并非始于世纪。
上世纪到年代，僵化的科层制就受到了广泛的批评，发达国家也曾出现一波波大规模的管理思想与管理实践的创新与推广，如Workflow（工作流管理）、Benchmarking（标杆管理）、（业务流程再造）等。但人们似乎再难去证明：这些管理革新真的提升了企业的效率。
越来越多的人们已经意识到，随着信息时代的加速到来，工业时代的组织管理范式，正在走过成熟期。仅仅进行组织管理上的优化，是远远不够的。
起点：思考维度与核心变量
在形塑和促动这一轮组织管理变革的各种因素中，什么是核心变量？应该从哪些维度去观察和思考？
第一，商业模式的转变是直接动因。与福特制相适应的是泰勒制。信息时代的商业模式，也必然要求新的组织管理模式与之相应。因为，金字塔式的组织管理模式，在根本上是无法快速、有效地与消费者互动的。海尔追求的“人单合一”，也即员工与市场、与消费需求的融合。
第二，信息技术是促动组织变革的根本驱动力。权力的重要来源，是信息的获取、处理、分发。最早的计算模式以大型机和小型机为中心，界面不友好，空闲时会浪费计算资源，无法激发用户的主动性。这些缺点，正适应了工业时代典型的组织管理方式——命令与控制。随后的“客户机服务器”计算模式，一大缺点是难以应对大量用户的并发请求，这其实刚好反映出了年代被（机）赋能了的员工与企业集中管理体制之间的矛盾。到了今天，在 “云（云计算）网（互联网）端（智能终端）”的计算模式下，开放性、分布式、对等性等技术特征，必然也会映射到组织管理之中。
第三，互联网的文化基因不容忽视。如果把互联网只视为一种重大技术，或认为它诞生过程中所内含的那些文化基因无需深究，将是一个极大的疏失。正如卡斯特尔的研究所提及，互联网的文化基因，与冷战氛围相关，与早期黑客那种合作使用资源的行为准则相关，与年代西方校园文化相关，也与一种学术传统直接相关：追求科学的共同目标，优秀者会赢得声望和荣誉，同行评论必不可少，同时所有研究成果必须公开。有了对互联网文化基因的梳理，我们才能够更好地理解互联网“人人参与”的理念、“端到端透明”的设计原则等。
第四，组织研究领域自身的小逻辑，也有着一定的影响。与自然科学不同，与诸多社会科学也不同，组织领域的研究，实践性很强，本身并不存在一个公认的终极范式。事实上，这一领域的发展节奏，经常会在“管理时尚的概念创新驱动”（其中不乏似是而非、华而不实的观点与观念）和“现实问题驱动”之间来回转换。现在，是回到“现实问题驱动”的时候了：拒绝对大时代、大变革的无感状态，切实地关切那些来自于现实的大命题、大问题。
真命题：信息时代的组织模式
基于上述思考维度，以下议题，对于今天的组织管理变革将非常重要。
组织变革的主流思想与核心隐喻：我们该持有怎样的基本隐喻，去看待和思考未来组织的变革？
组织的原则：工业时代集中化、极大化、“被组织”的组织原则，是否将迈向“柔性化、弱连接、小微化、自组织”的未来？
组织的结构与结构化：工业时代的金字塔体制广受指责，但远未全面崩塌，未来似乎也仍将在很多领域发挥重要作用，那么未来的组织结构是什么？这一新结构将怎样持续地“生成—断裂—再生成”？
组织的边界与规模：企业与市场两分法将在多大程度上失效？小微之美又将如何可能？
个体的工作与生活：不再跟从大机器节奏的个体，将迎来怎样的工作方式与生活方式？
以上问题简而言之：在狭义上，与C2B商业模式相匹配的组织管理模式是什么？在广义上，信息时代的组织模式是什么？
原则与隐喻：生命化与网络化
企业组织是什么？
这类问题的答案，很多时候其实是由我们习惯的“隐喻”、想象力和认知范式所决定。
随着上世纪年代前后大规模生产方式日趋成熟，它的核心原则与特性——标准化、流水线、大规模、集中化，开始向着社会经济的各类组织去渗透，如企业、学校、政府等，与之相应的科层制的组织管理体系也得以相伴而行。这些原则是如此之强大，以至于在很长时间里，它已经成为了几乎所有组织和个人都熟知并自觉遵从的默认常识统治、统摄、统一了工业时代的生产与消费，工作与生活，苦恼与欢乐。</p>

<p>钟表、流水线、金字塔，这些隐喻都在说明，工业时代无异于一部追求高效率的精准机器。到了今天，这种机械思维和隐喻，开始受到生态、网络和复杂性思维的持续冲击。不要小看这一变化：当组织被隐喻为机器，个体就会被隐喻为螺丝钉；当组织被隐喻为骨骼，文化就会被隐喻为血液；当组织被隐喻为网络，个体就会被隐喻为节点。</p>

<p>首先是生态化、生命化思维的广泛引入。凯文·凯利提醒说，“我们开始认识到那些一度被比喻为活着的系统确实活着，不过，它们所拥有的是一种范围更大、定义更广的生命。我将之称为‘超生命。‘……生物学定义的生命不过是超生命中的一个物种罢了。”梅拉妮•米歇尔也提到：“如果你问个生物学家什么是生命的个要素，每次得到的答案都会不一样。可能大部分会包括自主、新陈代谢、自我复制、生存本能，还有进化和适应。”年前，这些隐喻恐怕很难成为主流的商业话语。但在今天，人们开始关注：互联网上那些看似无序的活动，何以能够实现有序的自组织，如维基百科。诸如蚂蚁协作般的互联网协作，在效率和成果上又如何能够与组织严密的企业相媲美。</p>

<p>其次是“网络”视角的普遍应用。年代之后，把单个组织描述为一种“网络”的视角就已出现。企业之间的协作也是如此。交易成本学说，让人们理解了企业（看得见的手）与市场（看不见的手）的边界。但人们发现，它不能解释大量中间组织（握手）的存在，比如网络化的产业组织、长期缔约、特许经营等。从“供应链”到“价值网”等概念的更替，也说明“网络”视角在组织领域的应用已有多年。到了今天，随着消费者之间、消费者与企业之间、企业之间越来越广泛和深入的联网，这种话语体系已经越来越无所不在了。</p>

<p>最后是复杂系统视角在组织管理领域的逐步兴起。在尤尔亨看来，“管理1.0=层次体系”，也即金字塔。“管理2.0=流行”，如“平衡计分卡”、“六西格玛”等，“这些东西有时是正确的，有时却是错误的。他们推陈出新的速度比为小孩更换尿布的速度还快。”“管理3.0=复杂性”。BCG对100多家欧美上市公司的研究发现，过去15年间，这些公司的工作程序、垂直层级、协调机构和决策审批步骤等增加了50%～350%；而过去50年间，复杂性平均每年增加6.7%！《失控》一书主张：“有尊严地放手吧！”这本书给了互联网从业者一种模糊的暗示：不必困惑于互联网带来的复杂性，自然界的很多生态没有自上而下的管理，同样可以实现秩序。
生态、网络、复杂……这些视角都是在底层的观念和隐喻的层面上，对旧有的组织管理范式所展开的撼动。</p>

<p>组织结构：“大平台+小前端（个人）”
“没有开始、没有结束、也没有中心，或者反之，到处都是开始、到处都是结束、到处都是中心。”凯文凯利在《失控》中这样刻画他看到的“网络”。
以网络的视角来看企业，它面对的实际上有三张正在形成中的“网”：
消费者的个性化需求，正在相互连接成一个动态的需求之网；
企业之间的协作也走向了协同网的形态；
单个企业组织的内部结构，被倒逼着要从过去那种以（每个部门和岗位）节点职能为核心的、层级制的金字塔结构，转变为一种以(满足消费者个性化需求）流程为核心的、网状的结构。
只有实现了这种结构上的转换与提升，企业才能够有效地实现自身内部的联网，以及企业与消费者之间的联网，由此也才能真正有效地感知、捕捉、响应和满足消费者的个性化需求。</p>

<p>外显结构：大平台+小前端。
任何企业都面临着纵向控制/横向协同，或集权控制/分权创新的难题。今天的互联网和云计算，为这一老难题提供的新方法，就是以后端坚实的云平台（管理或服务平台+业务平台）去支持前端的灵活创新，并以“内部多个小前端”去实现与“外部多种个性化需求”的有效对接。这种“大平台+小前端”的结构，已成为了很多企业组织变革的“原型”结构。
7天酒店用IT把流程锁定，使得销售、服务、采购、财务等很多流程，都通过标准化的方式去实施，在此基础上，再实施给店主赋权的“放羊式管理”最终，7天酒店做到了可以让分店店主自主决定几乎所有的事情：分店预算、经营指标、用人等。
网上服装品牌韩都衣舍，每年可以发布近几万个自有品牌的新款服装，极大地考验着它的应变能力。为此，它在内部实行了鼓励员工自动自发创新的买手小组制，成立了数百个买手小组。买手小组独立核算且完全透明，拥有很大的自主权，比如公司只会规定最低定价，而起订量、定价、生产数量、促销政策等，则全部由买手小组自己决定。
苹果的AppStore，淘宝的网络零售平台等，同样也是类似的结构。其特征表现为分布式、自动自发、自治和参与式的治理等。</p>

<p>内在结构：组织网状化
“大平台+小前端”是一种外在的、显性的静态结构，隐性的、内在的动态结构则是组织的“动态网状化”。这一点在海尔得到了系统的实践。
为满足互联网时代个性化的需求，海尔把8万多名员工，努力转变为自动自发的2000多个自主经营体；将组织结构从“正三角”颠覆为“倒三角”；继之以进一步扁平为节点闭环的动态网状组织。每个节点，在海尔的变革中，都是一个开放的接口，连接着用户资源与海尔平台上的全球资源。</p>

<p>组织过程：自组织化
商业组织的组织方式，在过去通常被认为有两种主要形态。“公司”这种组织方式依赖于看得见的科层制，需要付出的是内部管理成本。“市场”这种组织方式依赖于看不见的价格机制，付出的是外部的交易成本。
缓慢但却坚定地，“公司化”曾是19世纪末20世纪初的一场商业运动，公司由此成为了社会结构的主要构件。大部分社会成员，不是在这家公司，就是在那家公司，个人大都必须要通过公司，才能更好地参与市场价值的交换。今天，这种“公司”占据主导地位的格局，已开始受到了冲击。
这主要是因为，互联网让跨越企业边界的大规模协作成为了可能。一方面是公司中很多商业流程，漂移出了企业边界之外，用过去的概念来描述，就是外包的普遍化。另一方面则是自发、自主、快速聚散的组织共同体的大量出现，也即《未来是湿的》一书所称的“无组织的组织力量”：凭爱好、兴趣，快速聚散，展开分享、合作乃至集体行动。Linux、维基百科、快速聚散的闪客、围绕国外电视剧形成的字幕组、由网民而非编辑决定新闻排列的DIGG等，都是如此。
“组织”仍将存在，但“公司”可能越来越弱化。“社会性”也仍然是我们的基本属性，但我们发挥自我能力和与市场连接、实现自我价值的方式，却与过去大不一样了。</p>

<p>组织边界：开放化
虽然互联网让企业内部的管理成本和外部交易成本都有所下降，但后者的下降速度却远快于前者。这种内外下降速度的不一致，带来了一个重要的结果： “公司”这种组织方式的效率大打折扣了，“公司”与“市场“之间的那堵“墙”，也因此松动了。
从价值链的视角来看，研发、设计、制造等很多个商业环节，都出现了一种突破企业边界、展开社会化协作的大趋势。宝洁公司注意到，虽然自己拥有8500名研究员，但公司外部还存在着150万个类似的研究人员！为吸引全球的研究人员在业余时间里分享和贡献他们的才智，宝洁把内部员工解决不了的问题放到网上，给出解决方案的研究者将获得报酬。这正是研发环节的开放。
从企业与消费者的关系来看，此前的模式是由企业向消费者单向地交付价值，而在C2B模式下，价值将由消费者与企业共同创造。如消费者的点评、参与设计、个性化定制等。
从产业组织的角度看，越来越多的产业，都在走向“云平台+小前端”的组织方式。换句话说，在很多产业里，众多小型机构，事实上已经把自身的很多职能留给了平台，催化出了更多专业的服务商，从而实现了社会化的大分工。在金融业里，同样也正在发生这样的产业重构：蚂蚁金服等平台的快速发展即是一例。</p>

<p>组织规模:小微化
“小微化”的趋势并非始于今日。有资料显示，在德国，全部工业企业的平均规模在1977年前呈上升趋势，但此后则呈下降趋势。在法国，无论是10人还是20人以上工业企业的平均规模，在1977年后都出现了下降。英国企业规模的下降从1968年开始。日本和美国则是自1967年起，平均企业规模就开始下降。
这种下降的原因，有社会化物流成本的下降、流通业效率的提升、产品模块化程度的提高、政策法规的开放等。到今天，互联网再一次加速了“小微化”的趋势，随着平台技术、商业流程、数据集成度的不断提高，小前端企业的“大而全”，已经越来越没有必要了。
在根本上这是因为，在工业时代占据主导地位的是“小品种、大批量”的规模经济，与之相应，组织也在持续走向极大化。1929年，资产达10亿美元以上的美国巨型企业约65家，到1988年这一数字增至了466家。再如今天的沃尔玛，它在全球的雇员超过了200多万人！但在信息时代，随着“多品种、小批量”的范围经济正在很多个行业里不断扩展自己的空间，更多组织的规模，相应地也在逐步走向小微化了。</p>

<p>个体：专家化与柔性化
抱怨“公司”这种组织方式，已经为时一个多世纪了。未来，个体的工作与生活能否得到根本性的改进？这对于所谓的“管理”又意味着什么？
德鲁克曾预测，知识工作者将很快成为发达国家中最大的族群。事实正是如此。上世纪五六十年代的IT应用，首先让后端财务人员等的工作方式发生了转变。80年代 PC普及，几乎让所有的知识工作者的工作方式都发生了革命。到今天的IT消费化浪潮——平板电脑、智能手机，以及云计算对消弭数字鸿沟的极大推进，企业所有部门和员工工作的IT化、信息化、知识化，将基本完成。
互联网时代，人人都将是知识工作者，人人也都是某个领域的专家，这将让个体的工作与生活更加柔性化。
一方面，个体的潜能将得到极大释放，每个人的特长都可以方便地在市场上“兑现”，而不一定要全职加入某一企业组织，才能实现个人能力与市场的交换。另一方面，工业时代那种工作、生活、学习割裂，个体无法柔性安排工作与生活的状态也将得到很大改变，类似于工作、生活、学习一体化的SOHO式工作、弹性工作等新形态将更为普遍。
个体的柔性化、专家化，正在给企业管理带来巨大挑战。所谓“管理”，其价值支撑就在于“协调、监督”。但在今天这种大规模协作、开放社区、人人都是专家、大数据透明化的环境下，“管理”的价值支撑又将去哪里找寻呢？
而对于个体来说，“人人都是专家”的前景听上去的确令人心仪，但这枚硬币还有着它坚硬的另一面：“人人也都必须要成为专家”！这既意味着某一能力的优异，也意味着要像专家那样“每个人都是自己的CEO”——自我驱动、自我监督、自我管理、自我提升。
这些问题，其实都算不上是什么新话题，但它们的确比任何时候都更为真实了！
新管理思想还在潮涌潮退，新管理理念还在摇移不定，新管理工具也仍处于大浪淘沙的荡涤之中。关于互联网必将带来组织管理模式变革这一话题，已经被一轮又一轮地讨论了10多年。今天是否已经到了可以进行阶段性总结的时候？
更远一点看，组织模式的变革，也不只是商业话题，而是与企业、社会和政府都紧密相关。比如从电子政务到互联网政务、云政务、大数据治理等。再如国际经贸领域对e-WTO的畅想和推动等。回到前文加里·哈默的提问：“21世纪的前20至30年内，能够像20世纪早期那样，产生革命性的管理原理吗？”他对此充满了期待，也满怀信心：“21世纪商业领袖们所面临的挑战与100年前工业先驱们遇见的一样。我们的确受前人束缚，并醉心于当前的管理。但是人类能够创造出现代的工业组织，也一定能够重新改写它。”</p>
</body></html>
    </content>

    <side style="font-size: 0.9em">
      <h3 style="margin-bottom: 1em">反向链接：</h3>
      
      <div style="display: grid; grid-gap: 1em; grid-template-columns: repeat(1fr);">
      
        <div class="backlink-box">
        <a class="internal-link" href="/%E8%87%AA%E7%BB%84%E7%BB%87%E7%AE%A1%E7%90%86">自组织管理</a><br>
      
      </div>
      
    </side>
  </div>
</article>

<!-- <hr> -->

<!-- 图谱的性能太差，先屏蔽了 --></main>
      <footer><!-- <script src="https://giscus.app/client.js"
        data-repo="oldwinter/knowledge-garden"
        data-repo-id="R_kgDOHT-NGQ"
        data-category="备发布站的评论系统"
        data-category-id="DIC_kwDOHT-NGc4CQ3PF"
        data-mapping="og:title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="light"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script> -->
</footer>
    </div>
    <!-- That file is not particularly elegant. This will need a refactor at some point. -->
<style>
  content a.internal-link {
    border-color: #8b88e6;
    background-color: #efefff;
  }

  #tooltip-wrapper {
    background: white;
    padding: 1em;
    border: 1px solid #ddd;
    border-radius: 4px;
    overflow: hidden;
    position: absolute;
    width: 400px;
    height: 400px; /* 悬浮卡片改高一点 */
    font-size: 0.8em;
    box-shadow: 0 5px 10px rgba(0,0,0,0.1);
    opacity: 0;
    transition: opacity 100ms;
  }

  /* #tooltip-wrapper:after {
		content: "";
		position: absolute;
		z-index: 1;
		bottom: 0;
		left: 0;
		pointer-events: none;
		background-image: linear-gradient(to bottom, rgba(255,255,255, 0), rgba(255,255,255, 1) 90%);
		width: 100%;
		height: 75px;
  } */
</style>
<!-- 给悬浮预览卡片加滚动条。 -->
<div style="opacity: 0; display: none; overflow-y: scroll;" id='tooltip-wrapper'>
  <div id='tooltip-content'>
  </div>
</div>

<iframe style="display: none; height: 0; width: 0;" id='link-preview-iframe' src="">
</iframe>

<script>
  var opacityTimeout;
  var contentTimeout;
  var transitionDurationMs = 100;

  var iframe = document.getElementById('link-preview-iframe')
  var tooltipWrapper = document.getElementById('tooltip-wrapper')
  var tooltipContent = document.getElementById('tooltip-content')

  function hideTooltip() {
    opacityTimeout = setTimeout(function() {
      tooltipWrapper.style.opacity = 0;
      contentTimeout = setTimeout(function() {
        tooltipContent.innerHTML = '';
        tooltipWrapper.style.display = 'none';
      }, transitionDurationMs + 1);
    }, transitionDurationMs)
  }

  function showTooltip(event) {
    var elem = event.target;
    var elem_props = elem.getClientRects()[elem.getClientRects().length - 1];
    var top = window.pageYOffset || document.documentElement.scrollTop

    if (event.target.host === window.location.host) {
      iframe.src = event.target.href
      iframe.onload = function() {
        tooltipContentHtml = ''
        tooltipContentHtml += '<div style="font-weight: bold;">' + iframe.contentWindow.document.querySelector('h1').innerHTML + '</div>'
        tooltipContentHtml += iframe.contentWindow.document.querySelector('content').innerHTML

        tooltipContent.innerHTML = tooltipContentHtml

        tooltipWrapper.style.display = 'block';
        setTimeout(function() {
          tooltipWrapper.style.opacity = 1;
        }, 1)
      }

      tooltipWrapper.style.left = elem_props.left - (tooltipWrapper.offsetWidth / 2) + (elem_props.width / 2) + "px";
      if ((window.innerHeight - elem_props.top) < (tooltipWrapper.offsetHeight)) {
          tooltipWrapper.style.top = elem_props.top + top - tooltipWrapper.offsetHeight - 10 + "px";
      } else if ((window.innerHeight - elem_props.top) > (tooltipWrapper.offsetHeight)) {
          tooltipWrapper.style.top = elem_props.top + top + 35 + "px";
      }

      if ((elem_props.left + (elem_props.width / 2)) < (tooltipWrapper.offsetWidth / 2)) {
          tooltipWrapper.style.left = "10px";
      } else if ((document.body.clientWidth - elem_props.left - (elem_props.width / 2)) < (tooltipWrapper.offsetWidth / 2)) {
          tooltipWrapper.style.left = document.body.clientWidth - tooltipWrapper.offsetWidth - 20 + "px";
      }
    }
  }

  function setupListeners(linkElement) {
    linkElement.addEventListener('mouseleave', function(_event) {
      hideTooltip();
    });

    tooltipWrapper.addEventListener('mouseleave', function(_event) {
      hideTooltip();
    });

    linkElement.addEventListener('touchend', function(_event) {
      hideTooltip();
    });

    tooltipWrapper.addEventListener('touchend', function(_event) {
      hideTooltip();
    });

    linkElement.addEventListener('mouseenter', function(event) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
      showTooltip(event);
    });

    tooltipWrapper.addEventListener('mouseenter', function(event) {
      clearTimeout(opacityTimeout);
      clearTimeout(contentTimeout);
    });
  }

  document.querySelectorAll('content a').forEach(setupListeners);
</script>

  </body>
</html>
